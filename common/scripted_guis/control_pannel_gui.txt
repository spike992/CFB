scripted_gui = {
	
	BI_country_selection_menu = {
		context_type = player_context  
		
		window_name = "BI_country_selection_container"
		
		visible = {
			has_country_flag = ui_country_selection
			#OR = { 
			#	has_country_flag = ai_difficulty_add_countries
			#	has_country_flag = topbar_show_countries
			#	has_country_flag = BI_performance_show_countries
			#	has_country_flag = BI_AI_show_countries
			#	has_country_flag = EAI_show_countries
			#}
		}
		
		dynamic_lists = { 
			topbar_country_list = { 
				array = country_selection 
				change_scope = yes
				entry_container = "topbar_country_container"
			}  
		} 
		
		properties = { 
			flag = {
				image = "[This.GetFlag]"
			}
			
			BI_filter_owned_neighbors = {
				image = "[BI_GetFilterNeighborsOwned]"
			}
			BI_filter_neighbors = {
				image = "[BI_GetFilterNeighbors]"
			}
			BI_filter_major = {
				image = "[BI_GetFilterMajor]"
			}
			BI_filter_faction = {
				image = "[BI_GetFilterFaction]"
			}
			BI_filter_subjects = {
				image = "[BI_GetFilterSubjects]"
			}
			BI_filter_enemies = {
				image = "[BI_GetFilterEnemies]"
			}
		}
		
		triggers = {
			flag_click_enabled = {
				ROOT = { 
					if = {
						limit = {
							has_country_flag = BI_performance_show_countries
						}
						if = {
							limit = {
								NOT = { has_country_flag = BI_performance_select_annex_country } 
							}
							NOT = { is_in_array = { BI_performance_selected_country_array = Prev.id } }
						}
					}
					else_if = {
						limit = {
							has_country_flag = EAI_show_countries
						}
						NOT = { is_in_array = { EAI_selected_country_array = Prev.id } }
					}
					else_if = {
						limit = {
							has_country_flag = BI_AI_show_countries
						}
						NOT = { is_in_array = { BI_AI_selected_countries = Prev.id } }
					}
					else_if = {
						limit = {
							has_country_flag = ai_difficulty_add_countries
						}
						NOT = { is_in_array = { Root.ai_setting_target_countries = Prev.id } }
						NOT = { PREV = { has_country_flag = ai_difficulty_setting_target } }
					}
						
				}
			}
		}
		
		effects = {
			BI_filter_close_button_click = {
				if = {
					limit = {
						has_country_flag = topbar_show_countries
					}
					clr_country_flag = topbar_show_countries 
					clear_array = country_selection
					clear_variable = current_topbar_slot
				}
				if = {
					limit = {
						has_country_flag = BI_performance_show_countries
					}
					clr_country_flag = BI_performance_show_countries
					clear_array = country_selection
				}
				if = {
					limit = {
						has_country_flag = EAI_show_countries
					}
					clr_country_flag = EAI_show_countries
					clear_array = country_selection
				}
				if = {
					limit = {
						has_country_flag = BI_AI_show_countries
					}
					clr_country_flag = BI_AI_show_countries
					clear_array = country_selection
				}
				if = {
					limit = {
						has_country_flag = ai_difficulty_add_countries
					}
					clr_country_flag = ai_difficulty_add_countries
					clear_array = country_selection
				}
				
				clr_country_flag = ui_country_selection
			}
			flag_click = {
				set_temp_variable = { add_country = THIS }
				ROOT = { 
					if = {
						limit = {
							has_country_flag = topbar_show_countries
						}
						
						var:current_topbar_slot = { 
							
							set_variable = { targeted_country = Prev.Prev.id } 
						}
						add_to_variable = { BI_topbar_update = 1 }
						clr_country_flag = topbar_show_countries 
						clear_array = country_selection
					}
					else_if = {
						limit = {
							has_country_flag = BI_performance_show_countries
						}
						if = {
							limit = {
								NOT = { has_country_flag = BI_performance_select_annex_country } 
							}
							add_to_array = { BI_performance_selected_country_array = Prev.id }
						}
						else = { 
							set_variable = { BI_performance_select_annex_country = Prev.id }
							
							clr_country_flag = BI_performance_select_annex_country
							clr_country_flag = BI_performance_show_countries
						}
					}
					else_if = {
						limit = {
							has_country_flag = EAI_show_countries
						}
						
						add_to_array = { Root.EAI_selected_country_array = Prev.id }
					}
					else_if = {
						limit = {
							has_country_flag = BI_AI_show_countries
						}
						
						add_to_array = { Root.BI_AI_selected_countries = Prev.id }
					}
					else_if = {
						limit = {
							has_country_flag = ai_difficulty_add_countries
						}
						if = {
							limit = {
								check_variable = { ai_setting_target_countries^num = 0 }
							}
							
							if = {
								limit = {
									NOT = {
										var:add_country = { has_country_flag = ai_difficulty_setting_target }
										any_country = {
											has_country_flag = ai_difficulty_setting_target
											is_in_array = { ai_difficulty_setting_targets = add_country }
										}
									}
								} 
								add_to_array = { Root.ai_setting_target_countries = add_country }
								remove_from_array = { array = ROOT.ai_setting_target }
								add_to_array = { ROOT.ai_setting_target = add_country }
								add_to_array = { ROOT.ai_setting_target = 1 }
								PREV = {
									set_country_flag = ai_difficulty_setting_target
									set_variable = { ROOT.selected_target = THIS }
								}
								clear_array = ROOT.ai_setting_target_countries
								add_to_array = { ROOT.ai_setting_target_countries = PREV }
								for_each_scope_loop = {
									array = PREV.ai_difficulty_setting_targets
									
									add_to_array = { ROOT.ai_setting_target_countries = THIS }
								}
									
							}
							
							else = {
								random_country = {
									limit = {
										is_in_array = { ai_difficulty_setting_targets = add_country }
									}
									ROOT = { 
										set_variable = { setting_holder = PREV }
										set_variable = { setting_add_country = add_country }
										country_event = BI_on_action.141 
									}
								}
								
							}
						}
						else = {
							var:ROOT.selected_target = {
								
								if = {
									limit = {
										NOT = {
											var:add_country = { has_country_flag = ai_difficulty_setting_target }
											any_country = {
												has_country_flag = ai_difficulty_setting_target
												is_in_array = { ai_difficulty_setting_targets = add_country }
											}
										}
									} 
									add_to_array = { ai_difficulty_setting_targets = add_country }
									
									clear_array = ROOT.ai_setting_target_countries
									add_to_array = { ROOT.ai_setting_target_countries = THIS }
									for_each_scope_loop = {
										array = ai_difficulty_setting_targets
										
										add_to_array = { ROOT.ai_setting_target_countries = THIS }
									}
									
									for_each_scope_loop = {
										array = ROOT.ai_setting_target_countries
										
										ui_ai_add_country_to_settings = yes
									}
								}
								else = {
									random_country = {
										limit = {
											is_in_array = { ai_difficulty_setting_targets = add_country }
										}
										ROOT = { 
											set_variable = { setting_holder = PREV }
											set_variable = { setting_add_country = add_country }
											country_event = BI_on_action.140 
										}
									}
									
								}
								
								
							}
						}
					}
				}
			}
			
			flag_shift_click = {
				ROOT = { 
					if = {
						limit = {
							has_country_flag = BI_performance_show_countries
						}
						
						for_each_scope_loop = {
							array = country_selection
							
							add_to_array = { Root.BI_performance_selected_country_array = This.id }
						}
					}
				}
			}
			
			BI_filter_owned_neighbors_click = {
				if = {
					limit = {
						NOT = { has_country_flag = BI_filter_neighbors_owned }
					}
					set_country_flag = BI_filter_neighbors_owned
				}
				else = {
					clr_country_flag = BI_filter_neighbors_owned
				}
				
				BI_filter_effect = yes
			}
			BI_filter_neighbors_click = {
				if = {
					limit = {
						NOT = { has_country_flag = BI_filter_neighbors }
					}
					set_country_flag = BI_filter_neighbors
				}
				else = {
					clr_country_flag = BI_filter_neighbors
				}
				
				BI_filter_effect = yes
			}
			BI_filter_major_click = {
				if = {
					limit = {
						NOT = { has_country_flag = BI_filter_major }
					}
					set_country_flag = BI_filter_major
				}
				else = {
					clr_country_flag = BI_filter_major
				}
				
				BI_filter_effect = yes
			}
			BI_filter_faction_click = {
				if = {
					limit = {
						NOT = { has_country_flag = BI_filter_faction }
					}
					set_country_flag = BI_filter_faction
				}
				else = {
					clr_country_flag = BI_filter_faction
				}
				
				BI_filter_effect = yes
			}
			BI_filter_subjects_click = {
				if = {
					limit = {
						NOT = { has_country_flag = BI_filter_subjects }
					}
					set_country_flag = BI_filter_subjects
				}
				else = {
					clr_country_flag = BI_filter_subjects
				}
				
				BI_filter_effect = yes
			}
			BI_filter_enemies_click = {
				if = {
					limit = {
						NOT = { has_country_flag = BI_filter_enemies }
					}
					set_country_flag = BI_filter_enemies
				}
				else = {
					clr_country_flag = BI_filter_enemies
				}
				
				BI_filter_effect = yes
			}
		}
	}

	BI_open_main_menu_button = {
		context_type = player_context
		
		parent_window_token = top_bar
		window_name = "bicepanel_container"

		visible = {
			has_country_flag = host
		}
		
		effects = {
			open_ai_bonus_click = {	
				if = {
					limit = {
						NOT = { has_global_flag = ui_ai_bonus_initialized }
					}
					ui_on_startup_difficulty_groups = yes 
					set_global_flag = ui_ai_bonus_initialized
				}
				
				clear_array = ai_setting_target
				clear_array = ai_setting_target_countries
				every_country = {
					limit = {
						has_country_flag = ai_difficulty_setting_target
					}
					add_to_array = { ROOT.ai_setting_target = THIS }
				}
				add_to_array = { ROOT.ai_setting_target = 1 }
				set_country_flag = ui_show_ai_bonuses
				
				set_variable = { ROOT.selected_target = ROOT.ai_setting_target^0 }
				
				var:selected_target = {
					clear_array = ROOT.ai_setting_target_countries
					add_to_array = { ROOT.ai_setting_target_countries = THIS }
					for_each_scope_loop = {
						array = ai_difficulty_setting_targets
						
						add_to_array = { ROOT.ai_setting_target_countries = THIS }
					} 
				}
			}
		}
		
		dirty = BI_open_main_menu  
	}

	ai_difficulty_country = {
		context_type = player_context

		window_name = "ai_difficulty_country_container"
 
		dynamic_lists = {
			setting_target = {
				array = ai_setting_target
				#array = global.countries
				change_scope = yes
				entry_container = "setting_target_window"
			}
			setting_target_countries = {
				array = ai_setting_target_countries
				#array = global.countries
				change_scope = yes
				entry_container = "setting_target_countries_window"
			}
		} 
		  
		visible = {
			has_country_flag = ui_show_ai_bonuses
		}
		
		properties = {
			setting_target_button = { 
				frame = frame_var 
			}
			flag = {
				image = "[This.GetFlag]"
			}
						
			politics_bar = { 
				frame = politics_bar
			}
			army_bar = { 
				frame = army_bar
			}
			air_bar = { 
				frame = air_bar
			}
			navy_bar = { 
				frame = navy_bar
			}
			construction_bar = { 
				frame = construction_bar
			}
			production_bar = { 
				frame = production_bar
			}

			politics_nerf_bar = { 
				frame = politics_nerf_bar
			}
			army_nerf_bar = { 
				frame = army_nerf_bar
			}
			air_nerf_bar = { 
				frame = air_nerf_bar
			}
			navy_nerf_bar = { 
				frame = navy_nerf_bar
			}
			construction_nerf_bar = { 
				frame = construction_nerf_bar
			}
			production_nerf_bar = { 
				frame = production_nerf_bar
			}
		} 
		
		triggers = {

		  # Buffs
			politics_bar_click_enabled = {
				var:ROOT.selected_target = { 
					set_temp_variable = { politics_bar = ai_diff_politics }
				}
			}
			army_bar_click_enabled = {
				var:ROOT.selected_target = { 
					set_temp_variable = { army_bar = ai_diff_army }
				}
			}
			air_bar_click_enabled = {
				var:ROOT.selected_target = { 
					set_temp_variable = { air_bar = ai_diff_air }
				}
			}
			navy_bar_click_enabled = {
				var:ROOT.selected_target = { 
					set_temp_variable = { navy_bar = ai_diff_navy }
				}
			}
			production_bar_click_enabled = {
				var:ROOT.selected_target = { 
					set_temp_variable = { production_bar = ai_diff_production }
				}
			}
			construction_bar_click_enabled = {
				var:ROOT.selected_target = { 
					set_temp_variable = { construction_bar = ai_diff_construction }
				}
			}

		  # Nerfs
			politics_nerf_bar_click_enabled = {
				var:ROOT.selected_target = { 
					set_temp_variable = { politics_nerf_bar = ai_diff_politics_nerf }
				}
			}
			army_nerf_bar_click_enabled = {
				var:ROOT.selected_target = { 
					set_temp_variable = { army_nerf_bar = ai_diff_army_nerf }
				}
			}
			air_nerf_bar_click_enabled = {
				var:ROOT.selected_target = { 
					set_temp_variable = { air_nerf_bar = ai_diff_air_nerf }
				}
			}
			navy_nerf_bar_click_enabled = {
				var:ROOT.selected_target = { 
					set_temp_variable = { navy_nerf_bar = ai_diff_navy_nerf }
				}
			}
			production_nerf_bar_click_enabled = {
				var:ROOT.selected_target = { 
					set_temp_variable = { production_nerf_bar = ai_diff_production_nerf }
				}
			}
			construction_nerf_bar_click_enabled = {
				var:ROOT.selected_target = { 
					set_temp_variable = { construction_nerf_bar = ai_diff_construction_nerf }
				}
			}
		
		  # Other

			setting_target_button_click_enabled = {
				set_temp_variable = { frame_var = 2 }
				if = {
					limit = {
						check_variable = { ROOT.selected_target = THIS }
					}
					set_temp_variable = { frame_var = 1 }
				}
			}
			
			debug_button_visible = {
				always = no 
			}
		}
		
		effects = {
			close_button_click = {
				clear_array = ai_setting_target
				clear_array = ai_setting_target_countries
				clear_variable = ROOT.selected_target
				clr_country_flag = ui_show_ai_bonuses
			}
			open_modifier_button_click = {
				if = {
					limit = {
						has_country_flag = ui_show_ai_modifier
					}
					clr_country_flag = ui_show_ai_modifier
					clear_array = ai_diff_modifier_display
				}
				else = {
					set_country_flag = ui_show_ai_modifier
					
					ROOT = {
						clear_array = ai_diff_modifier_display
						var:ROOT.selected_target = {
							for_each_loop = {
								array = BI_AI_modifier_list
								
								add_to_array = { ROOT.ai_diff_modifier_display = v }
							}
						}
					}
				}
			}
			add_countries_button_click = {
				if = {
					limit = {
						has_country_flag = ai_difficulty_add_countries
					}
					clr_country_flag = ai_difficulty_add_countries
					clr_country_flag = ui_country_selection
				}
				else = {
					BI_filter_effect = yes
					set_country_flag = ai_difficulty_add_countries
					set_country_flag = ui_country_selection
				}
			}
			
			flag_right_click = {
				if = {
					limit = {
						check_variable = { ROOT.ai_setting_target_countries^num < 2 }
					}
				
					clear_variable = ROOT.selected_target
					clr_country_flag = ai_difficulty_setting_target 
					remove_from_array = { ROOT.ai_setting_target = THIS }
					clear_array = ai_difficulty_setting_targets
					clear_array = ROOT.ai_setting_target_countries
					clear_array = PREV.name_array
					
					ui_ai_remove_country_from_settings = yes
				}
				else_if = {
					limit = {
						has_country_flag = ai_difficulty_setting_target
					}
					for_each_scope_loop = {
						array = ai_difficulty_setting_targets
						break = small_break
						
						if = {
							limit = {
								NOT = { tag = PREV }
							}
							set_temp_variable = { new_storer = THIS }
							clear_array = ai_difficulty_setting_targets
							set_country_flag = ai_difficulty_setting_target
							for_each_loop = {
								array = PREV.ai_difficulty_setting_targets
								
								if = {
									limit = {
										NOT = { check_variable = { v = THIS } }
									}
									add_to_array = { ai_difficulty_setting_targets = v }
								}
							}
							for_each_loop = {
								array = PREV.name_array
								
								add_to_array = { name_array = v }
							}
							set_variable = { ai_diff_politics = PREV.ai_diff_politics }
							set_variable = { ai_diff_army = PREV.ai_diff_army }
							set_variable = { ai_diff_air = PREV.ai_diff_air }
							set_variable = { ai_diff_navy = PREV.ai_diff_navy }
							set_variable = { ai_diff_construction = PREV.ai_diff_construction }
							set_variable = { ai_diff_production = PREV.ai_diff_production }
							clear_array = PREV.name_array
							set_temp_variable = { small_break = 1 }
						}
					}
					
					for_each_loop = {
						array = ROOT.ai_setting_target
						
						if = {
							limit = {
								check_variable = { v = THIS }
							}
							add_to_array = { 
								array = ROOT.ai_setting_target
								value = new_storer
								index = i
							}
							set_temp_variable = { break = 1 }
						}
					}
					remove_from_array = { ROOT.ai_setting_target = THIS.id }
					clear_array = ai_difficulty_setting_targets
					clr_country_flag = ai_difficulty_setting_target
					
					var:new_storer = {
						set_variable = { ROOT.selected_target = THIS }
						clear_array = ROOT.ai_setting_target_countries
						add_to_array = { ROOT.ai_setting_target_countries = THIS }
						for_each_scope_loop = {
							array = ai_difficulty_setting_targets
							
							add_to_array = { ROOT.ai_setting_target_countries = THIS }
						}
					}
					
					ui_ai_remove_country_from_settings = yes
				}
				else = {
					var:ROOT.selected_target = {
						remove_from_array = { ai_difficulty_setting_targets = PREV }
						
						
						clear_array = ROOT.ai_setting_target_countries
						add_to_array = { ROOT.ai_setting_target_countries = THIS }
						for_each_scope_loop = {
							array = ai_difficulty_setting_targets
							
							add_to_array = { ROOT.ai_setting_target_countries = THIS }
						}
					}
					clear_array = PREV.name_array
					
					ui_ai_remove_country_from_settings = yes
				}
			}
			flag_shift_click = {
				if = {
					limit = {
						check_variable = { ROOT.ai_setting_target_countries^num > 1 }
					}
						
					if = {
						limit = {
							has_country_flag = ai_difficulty_setting_target
						}
						for_each_scope_loop = {
							array = ai_difficulty_setting_targets
							break = small_break
							
							if = {
								limit = {
									NOT = { tag = PREV }
								}
								set_temp_variable = { new_storer = THIS }
								clear_array = ai_difficulty_setting_targets
								set_country_flag = ai_difficulty_setting_target
								for_each_loop = {
									array = PREV.ai_difficulty_setting_targets
									
									if = {
										limit = {
											NOT = { check_variable = { v = THIS } }
										}
										add_to_array = { ai_difficulty_setting_targets = v }
									}
								}
								for_each_loop = {
									array = PREV.name_array
									
									add_to_array = { name_array = v }
								}
								set_variable = { ai_diff_strengthen = PREV.ai_diff_strengthen }
								set_variable = { ai_diff_weaken = PREV.ai_diff_weaken }
								set_variable = { ai_diff_politics = PREV.ai_diff_politics }
								set_variable = { ai_diff_army = PREV.ai_diff_army }
								set_variable = { ai_diff_air = PREV.ai_diff_air }
								set_variable = { ai_diff_navy = PREV.ai_diff_navy }
								set_variable = { ai_diff_fuel = PREV.ai_diff_fuel }
								set_variable = { ai_diff_construction = PREV.ai_diff_construction }
								set_variable = { ai_diff_production = PREV.ai_diff_production }
								clear_array = PREV.name_array
								set_temp_variable = { small_break = 1 }
							}
						}
						
						for_each_loop = {
							array = ROOT.ai_setting_target
							
							if = {
								limit = {
									check_variable = { v = THIS }
								}
								add_to_array = { 
									array = ROOT.ai_setting_target
									value = new_storer
									index = i
								}
								set_temp_variable = { break = 1 }
							}
						}
						remove_from_array = { ROOT.ai_setting_target = THIS.id }
						clear_array = ai_difficulty_setting_targets
						clr_country_flag = ai_difficulty_setting_target
						
						var:new_storer = {
							set_variable = { ROOT.selected_target = THIS }
							clear_array = ROOT.ai_setting_target_countries
							add_to_array = { ROOT.ai_setting_target_countries = THIS }
							for_each_scope_loop = {
								array = ai_difficulty_setting_targets
								
								add_to_array = { ROOT.ai_setting_target_countries = THIS }
							}
						}
						remove_from_array = { array = ROOT.ai_setting_target }
						add_to_array = { ROOT.ai_setting_target = THIS }
						add_to_array = { ROOT.ai_setting_target = 1 }
						set_variable = { ROOT.selected_target = THIS }
						set_country_flag = ai_difficulty_setting_target
						
						clear_array = ROOT.ai_setting_target_countries
						add_to_array = { ROOT.ai_setting_target_countries = THIS }
						for_each_scope_loop = {
							array = ai_difficulty_setting_targets
							
							add_to_array = { ROOT.ai_setting_target_countries = THIS }
						}
					}
					else = {
						var:ROOT.selected_target = {
							remove_from_array = { ai_difficulty_setting_targets = PREV }
							
							remove_from_array = { array = ROOT.ai_setting_target }
							add_to_array = { ROOT.ai_setting_target = PREV }
							add_to_array = { ROOT.ai_setting_target = 1 }
							
							clear_array = ROOT.ai_setting_target_countries
							add_to_array = { ROOT.ai_setting_target_countries = THIS }
							for_each_scope_loop = {
								array = ai_difficulty_setting_targets
								
								add_to_array = { ROOT.ai_setting_target_countries = THIS }
							}
							
							PREV = {
								set_variable = { ai_diff_strengthen = PREV.ai_diff_strengthen }
								set_variable = { ai_diff_weaken = PREV.ai_diff_weaken }
								set_variable = { ai_diff_politics = PREV.ai_diff_politics }
								set_variable = { ai_diff_army = PREV.ai_diff_army }
								set_variable = { ai_diff_air = PREV.ai_diff_air }
								set_variable = { ai_diff_navy = PREV.ai_diff_navy }
								set_variable = { ai_diff_fuel = PREV.ai_diff_fuel }
								set_variable = { ai_diff_construction = PREV.ai_diff_construction }
								set_variable = { ai_diff_production = PREV.ai_diff_production }
							}
						}
						set_variable = { ROOT.selected_target = THIS }
						
						set_country_flag = ai_difficulty_setting_target
						
						clear_array = ROOT.ai_setting_target_countries
						add_to_array = { ROOT.ai_setting_target_countries = THIS }
						for_each_scope_loop = {
							array = ai_difficulty_setting_targets
							
							add_to_array = { ROOT.ai_setting_target_countries = THIS }
						}
					}
				}
			}
			
			setting_target_button_click = {
				if = {
					limit = {
						check_variable = { v = 1 }
					}
					set_variable = { ROOT.selected_target = THIS }
					clear_array = ROOT.ai_setting_target_countries
					
					ROOT = { set_country_flag = ai_difficulty_add_countries set_country_flag = ui_country_selection }
					
					BI_filter_effect = yes
					
					clear_array = ai_diff_modifier_display
				}
				else = {
					ROOT = { clr_country_flag = ai_difficulty_add_countries clr_country_flag = ui_country_selection }
					
					set_variable = { ROOT.selected_target = THIS }
					
					clear_array = ROOT.ai_setting_target_countries
					add_to_array = { ROOT.ai_setting_target_countries = THIS }
					for_each_scope_loop = {
						array = ai_difficulty_setting_targets
				 		
						add_to_array = { ROOT.ai_setting_target_countries = THIS }
					} 
					clear_array = ROOT.ai_diff_modifier_display
					var:ROOT.selected_target = {
						for_each_loop = {
							array = BI_AI_modifier_list
							
							add_to_array = { ROOT.ai_diff_modifier_display = v }
						}
					}
				} 
			} 
			setting_target_button_right_click = {
				if = {
					limit = {
						NOT = { check_variable = { v = 1 } }
					}
					
					if = {
						limit = {
							has_country_flag = setting_type_name
						}
						clr_country_flag = setting_type_name
						clear_variable = ROOT.setting_name_target
					}
					else = {
						for_each_scope_loop = {
							array = ROOT.ai_setting_target
							
							clr_country_flag = setting_type_name
						}
						set_country_flag = setting_type_name
						set_variable = { ROOT.setting_name_target = THIS }
					}
				}
			} 
			
		  # Buffs
			politics_bar_click = { 
				effect_tooltip = {
					every_country = { limit = { is_in_array = { ROOT.ai_setting_target_countries = THIS } }
						if = {
							limit = {
					 			has_idea = ai_diff_politics_1
		 					}
							show_ideas_tooltip = ai_diff_politics_1
						}
						else_if = {
							limit = {
								has_idea = ai_diff_politics_2
							}
							show_ideas_tooltip = ai_diff_politics_2
						}
						else_if = {
							limit = {
								has_idea = ai_diff_politics_3
							}
							show_ideas_tooltip = ai_diff_politics_3
						}
						else_if = {
							limit = {
								has_idea = ai_diff_politics_4
							}
							show_ideas_tooltip = ai_diff_politics_4
						}
					}
				}
			}
			politics_up_click = {
				effect_tooltip = {
					every_country = { limit = { is_in_array = { ROOT.ai_setting_target_countries = THIS } }
						if = {
							limit = {
								has_idea = ai_diff_politics_1
							}
							swap_ideas = {
								add_idea = ai_diff_politics_2
								remove_idea = ai_diff_politics_1
							}
						}
						else_if = {
							limit = {
								has_idea = ai_diff_politics_2
							}
							swap_ideas = {
								add_idea = ai_diff_politics_3
								remove_idea = ai_diff_politics_2
							}
						}
						else_if = {
							limit = {
								has_idea = ai_diff_politics_3
							}
							swap_ideas = {
								add_idea = ai_diff_politics_4
								remove_idea = ai_diff_politics_3
							}
						}
						else_if = {
							limit = {
								NOT = { has_idea = ai_diff_politics_4 }
							}
							add_ideas = ai_diff_politics_1
						}
					}
				}
				var:ROOT.selected_target = {
					add_to_variable = { ai_diff_politics = 25 }
					clamp_variable = { var = ai_diff_politics max = 100 }
					
					set_temp_variable = { lvl = ai_diff_politics }
					
					if = {
						limit = {
							check_variable = { lvl > 0 }
						}
						divide_temp_variable = { lvl = 25 }
						for_each_scope_loop = {
							array = ROOT.ai_setting_target_countries
								
							if = {
								limit = {
									meta_trigger = {
										text = {
											NOT = { has_idea = ai_diff_politics_[X] }
										}
										X = "[?lvl]"
									}
								}
								remove_ideas = {
									ai_diff_politics_1
									ai_diff_politics_2
									ai_diff_politics_3
									ai_diff_politics_4
								}
								meta_effect = {
									text = {
										add_ideas = ai_diff_politics_[X]
									}
									X = "[?lvl]"
								}
							}
						}
					}
				}
			}
			politics_down_click = {		
				effect_tooltip = {
					every_country = { limit = { is_in_array = { ROOT.ai_setting_target_countries = THIS } }
						if = {
							limit = {
								has_idea = ai_diff_politics_4
							}
							swap_ideas = {
								add_idea = ai_diff_politics_3
								remove_idea = ai_diff_politics_4
							}
						}
						else_if = {
							limit = {
								has_idea = ai_diff_politics_3
							}
							swap_ideas = {
								add_idea = ai_diff_politics_2
								remove_idea = ai_diff_politics_3
							}
						}
						else_if = {
							limit = {
								has_idea = ai_diff_politics_2
							}
							swap_ideas = {
								add_idea = ai_diff_politics_1
								remove_idea = ai_diff_politics_2
							}
						}
						else_if = {
							limit = {
								has_idea = ai_diff_politics_1
							}
							remove_ideas = ai_diff_politics_1
						}
					}
				}
				var:ROOT.selected_target = {
					add_to_variable = { ai_diff_politics = -25 }
					clamp_variable = { var = ai_diff_politics min = 0 }
					
					set_temp_variable = { lvl = ai_diff_politics }
					
					if = {
						limit = {
							check_variable = { lvl > 0 }
						}
						divide_temp_variable = { lvl = 25 }
						for_each_scope_loop = {
							array = ROOT.ai_setting_target_countries
								
							if = {
								limit = {
									meta_trigger = {
										text = {
											NOT = { has_idea = ai_diff_politics_[X] }
										}
										X = "[?lvl]"
									}
								}
								remove_ideas = {
									ai_diff_politics_1
									ai_diff_politics_2
									ai_diff_politics_3
									ai_diff_politics_4
								}
								meta_effect = {
									text = {
										add_ideas = ai_diff_politics_[X]
									}
									X = "[?lvl]"
								}
							}
						}
					}
					else = {
						for_each_scope_loop = {
							array = ROOT.ai_setting_target_countries
								
							remove_ideas = {
								ai_diff_politics_1
								ai_diff_politics_2
								ai_diff_politics_3
								ai_diff_politics_4
							}
						}
					}
				}
			}
			
			army_bar_click = { 
				effect_tooltip = {
					every_country = { limit = { is_in_array = { ROOT.ai_setting_target_countries = THIS } }
						if = {
							limit = {
					 			has_idea = ai_diff_army_1
		 					}
							show_ideas_tooltip = ai_diff_army_1
						}
						else_if = {
							limit = {
								has_idea = ai_diff_army_2
							}
							show_ideas_tooltip = ai_diff_army_2
						}
						else_if = {
							limit = {
								has_idea = ai_diff_army_3
							}
							show_ideas_tooltip = ai_diff_army_3
						}
						else_if = {
							limit = {
								has_idea = ai_diff_army_4
							}
							show_ideas_tooltip = ai_diff_army_4
						}
					}
				}
			}
			army_up_click = {
				effect_tooltip = {
					every_country = { limit = { is_in_array = { ROOT.ai_setting_target_countries = THIS } }
						if = {
							limit = {
								has_idea = ai_diff_army_1
							}
							swap_ideas = {
								add_idea = ai_diff_army_2
								remove_idea = ai_diff_army_1
							}
						}
						else_if = {
							limit = {
								has_idea = ai_diff_army_2
							}
							swap_ideas = {
								add_idea = ai_diff_army_3
								remove_idea = ai_diff_army_2
							}
						}
						else_if = {
							limit = {
								has_idea = ai_diff_army_3
							}
							swap_ideas = {
								add_idea = ai_diff_army_4
								remove_idea = ai_diff_army_3
							}
						}
						else_if = {
							limit = {
								NOT = { has_idea = ai_diff_army_4 }
							}
							add_ideas = ai_diff_army_1
						}
					}
				}
				var:ROOT.selected_target = {
					add_to_variable = { ai_diff_army = 25 }
					clamp_variable = { var = ai_diff_army max = 100 }
					
					set_temp_variable = { lvl = ai_diff_army }
					
					if = {
						limit = {
							check_variable = { lvl > 0 }
						}
						divide_temp_variable = { lvl = 25 }
						for_each_scope_loop = {
							array = ROOT.ai_setting_target_countries
								
							if = {
								limit = {
									meta_trigger = {
										text = {
											NOT = { has_idea = ai_diff_army_[X] }
										}
										X = "[?lvl]"
									}
								}
								remove_ideas = {
									ai_diff_army_1
									ai_diff_army_2
									ai_diff_army_3
									ai_diff_army_4
								}
								meta_effect = {
									text = {
										add_ideas = ai_diff_army_[X]
									}
									X = "[?lvl]"
								}
							}
						}
					}
				}
			}
			army_down_click = {		
				effect_tooltip = {
					every_country = { limit = { is_in_array = { ROOT.ai_setting_target_countries = THIS } }
						if = {
							limit = {
								has_idea = ai_diff_army_4
							}
							swap_ideas = {
								add_idea = ai_diff_army_3
								remove_idea = ai_diff_army_4
							}
						}
						else_if = {
							limit = {
								has_idea = ai_diff_army_3
							}
							swap_ideas = {
								add_idea = ai_diff_army_2
								remove_idea = ai_diff_army_3
							}
						}
						else_if = {
							limit = {
								has_idea = ai_diff_army_2
							}
							swap_ideas = {
								add_idea = ai_diff_army_1
								remove_idea = ai_diff_army_2
							}
						}
						else_if = {
							limit = {
								has_idea = ai_diff_army_1
							}
							remove_ideas = ai_diff_army_1
						}
					}
				}
				var:ROOT.selected_target = {
					add_to_variable = { ai_diff_army = -25 }
					clamp_variable = { var = ai_diff_army min = 0 }
					
					set_temp_variable = { lvl = ai_diff_army }
					
					if = {
						limit = {
							check_variable = { lvl > 0 }
						}
						divide_temp_variable = { lvl = 25 }
						for_each_scope_loop = {
							array = ROOT.ai_setting_target_countries
								
							if = {
								limit = {
									meta_trigger = {
										text = {
											NOT = { has_idea = ai_diff_army_[X] }
										}
										X = "[?lvl]"
									}
								}
								remove_ideas = {
									ai_diff_army_1
									ai_diff_army_2
									ai_diff_army_3
									ai_diff_army_4
								}
								meta_effect = {
									text = {
										add_ideas = ai_diff_army_[X]
									}
									X = "[?lvl]"
								}
							}
						}
					}
					else = {
						for_each_scope_loop = {
							array = ROOT.ai_setting_target_countries
								
							remove_ideas = {
								ai_diff_army_1
								ai_diff_army_2
								ai_diff_army_3
								ai_diff_army_4
							}
						}
					}
				}
			}
			
			air_bar_click = { 
				effect_tooltip = {
					every_country = { limit = { is_in_array = { ROOT.ai_setting_target_countries = THIS } }
						if = {
							limit = {
					 			has_idea = ai_diff_air_1
		 					}
							show_ideas_tooltip = ai_diff_air_1
						}
						else_if = {
							limit = {
								has_idea = ai_diff_air_2
							}
							show_ideas_tooltip = ai_diff_air_2
						}
						else_if = {
							limit = {
								has_idea = ai_diff_air_3
							}
							show_ideas_tooltip = ai_diff_air_3
						}
						else_if = {
							limit = {
								has_idea = ai_diff_air_4
							}
							show_ideas_tooltip = ai_diff_air_4
						}
					}
				}
			}
			air_up_click = {
				effect_tooltip = {
					every_country = { limit = { is_in_array = { ROOT.ai_setting_target_countries = THIS } }
						if = {
							limit = {
								has_idea = ai_diff_air_1
							}
							swap_ideas = {
								add_idea = ai_diff_air_2
								remove_idea = ai_diff_air_1
							}
						}
						else_if = {
							limit = {
								has_idea = ai_diff_air_2
							}
							swap_ideas = {
								add_idea = ai_diff_air_3
								remove_idea = ai_diff_air_2
							}
						}
						else_if = {
							limit = {
								has_idea = ai_diff_air_3
							}
							swap_ideas = {
								add_idea = ai_diff_air_4
								remove_idea = ai_diff_air_3
							}
						}
						else_if = {
							limit = {
								NOT = { has_idea = ai_diff_air_4 }
							}
							add_ideas = ai_diff_air_1
						}
					}
				}
				var:ROOT.selected_target = {
					add_to_variable = { ai_diff_air = 25 }
					clamp_variable = { var = ai_diff_air max = 100 }
					
					set_temp_variable = { lvl = ai_diff_air }
					
					if = {
						limit = {
							check_variable = { lvl > 0 }
						}
						divide_temp_variable = { lvl = 25 }
						for_each_scope_loop = {
							array = ROOT.ai_setting_target_countries
								
							if = {
								limit = {
									meta_trigger = {
										text = {
											NOT = { has_idea = ai_diff_air_[X] }
										}
										X = "[?lvl]"
									}
								}
								remove_ideas = {
									ai_diff_air_1
									ai_diff_air_2
									ai_diff_air_3
									ai_diff_air_4
								}
								meta_effect = {
									text = {
										add_ideas = ai_diff_air_[X]
									}
									X = "[?lvl]"
								}
							}
						}
					}
				}
			}
			air_down_click = {		
				effect_tooltip = {
					every_country = { limit = { is_in_array = { ROOT.ai_setting_target_countries = THIS } }
						if = {
							limit = {
								has_idea = ai_diff_air_4
							}
							swap_ideas = {
								add_idea = ai_diff_air_3
								remove_idea = ai_diff_air_4
							}
						}
						else_if = {
							limit = {
								has_idea = ai_diff_air_3
							}
							swap_ideas = {
								add_idea = ai_diff_air_2
								remove_idea = ai_diff_air_3
							}
						}
						else_if = {
							limit = {
								has_idea = ai_diff_air_2
							}
							swap_ideas = {
								add_idea = ai_diff_air_1
								remove_idea = ai_diff_air_2
							}
						}
						else_if = {
							limit = {
								has_idea = ai_diff_air_1
							}
							remove_ideas = ai_diff_air_1
						}
					}
				}
				var:ROOT.selected_target = {
					add_to_variable = { ai_diff_air = -25 }
					clamp_variable = { var = ai_diff_air min = 0 }
					
					set_temp_variable = { lvl = ai_diff_air }
					
					if = {
						limit = {
							check_variable = { lvl > 0 }
						}
						divide_temp_variable = { lvl = 25 }
						for_each_scope_loop = {
							array = ROOT.ai_setting_target_countries
								
							if = {
								limit = {
									meta_trigger = {
										text = {
											NOT = { has_idea = ai_diff_air_[X] }
										}
										X = "[?lvl]"
									}
								}
								remove_ideas = {
									ai_diff_air_1
									ai_diff_air_2
									ai_diff_air_3
									ai_diff_air_4
								}
								meta_effect = {
									text = {
										add_ideas = ai_diff_air_[X]
									}
									X = "[?lvl]"
								}
							}
						}
					}
					else = {
						for_each_scope_loop = {
							array = ROOT.ai_setting_target_countries
								
							remove_ideas = {
								ai_diff_air_1
								ai_diff_air_2
								ai_diff_air_3
								ai_diff_air_4
							}
						}
					}
				}
			}
			
			navy_bar_click = { 
				effect_tooltip = {
					every_country = { limit = { is_in_array = { ROOT.ai_setting_target_countries = THIS } }
						if = {
							limit = {
					 			has_idea = ai_diff_navy_1
		 					}
							show_ideas_tooltip = ai_diff_navy_1
						}
						else_if = {
							limit = {
								has_idea = ai_diff_navy_2
							}
							show_ideas_tooltip = ai_diff_navy_2
						}
						else_if = {
							limit = {
								has_idea = ai_diff_navy_3
							}
							show_ideas_tooltip = ai_diff_navy_3
						}
						else_if = {
							limit = {
								has_idea = ai_diff_navy_4
							}
							show_ideas_tooltip = ai_diff_navy_4
						}
					}
				}
			}
			navy_up_click = {
				effect_tooltip = {
					every_country = { limit = { is_in_array = { ROOT.ai_setting_target_countries = THIS } }
						if = {
							limit = {
								has_idea = ai_diff_navy_1
							}
							swap_ideas = {
								add_idea = ai_diff_navy_2
								remove_idea = ai_diff_navy_1
							}
						}
						else_if = {
							limit = {
								has_idea = ai_diff_navy_2
							}
							swap_ideas = {
								add_idea = ai_diff_navy_3
								remove_idea = ai_diff_navy_2
							}
						}
						else_if = {
							limit = {
								has_idea = ai_diff_navy_3
							}
							swap_ideas = {
								add_idea = ai_diff_navy_4
								remove_idea = ai_diff_navy_3
							}
						}
						else_if = {
							limit = {
								NOT = { has_idea = ai_diff_navy_4 }
							}
							add_ideas = ai_diff_navy_1
						}
					}
				}
				var:ROOT.selected_target = {
					add_to_variable = { ai_diff_navy = 25 }
					clamp_variable = { var = ai_diff_navy max = 100 }
					
					set_temp_variable = { lvl = ai_diff_navy }
					
					if = {
						limit = {
							check_variable = { lvl > 0 }
						}
						divide_temp_variable = { lvl = 25 }
						for_each_scope_loop = {
							array = ROOT.ai_setting_target_countries
								
							if = {
								limit = {
									meta_trigger = {
										text = {
											NOT = { has_idea = ai_diff_navy_[X] }
										}
										X = "[?lvl]"
									}
								}
								remove_ideas = {
									ai_diff_navy_1
									ai_diff_navy_2
									ai_diff_navy_3
									ai_diff_navy_4
								}
								meta_effect = {
									text = {
										add_ideas = ai_diff_navy_[X]
									}
									X = "[?lvl]"
								}
							}
						}
					}
				}
			}
			navy_down_click = {		
				effect_tooltip = {
					every_country = { limit = { is_in_array = { ROOT.ai_setting_target_countries = THIS } }
						if = {
							limit = {
								has_idea = ai_diff_navy_4
							}
							swap_ideas = {
								add_idea = ai_diff_navy_3
								remove_idea = ai_diff_navy_4
							}
						}
						else_if = {
							limit = {
								has_idea = ai_diff_navy_3
							}
							swap_ideas = {
								add_idea = ai_diff_navy_2
								remove_idea = ai_diff_navy_3
							}
						}
						else_if = {
							limit = {
								has_idea = ai_diff_navy_2
							}
							swap_ideas = {
								add_idea = ai_diff_navy_1
								remove_idea = ai_diff_navy_2
							}
						}
						else_if = {
							limit = {
								has_idea = ai_diff_navy_1
							}
							remove_ideas = ai_diff_navy_1
						}
					}
				}
				var:ROOT.selected_target = {
					add_to_variable = { ai_diff_navy = -25 }
					clamp_variable = { var = ai_diff_navy min = 0 }
					
					set_temp_variable = { lvl = ai_diff_navy }
					
					if = {
						limit = {
							check_variable = { lvl > 0 }
						}
						divide_temp_variable = { lvl = 25 }
						for_each_scope_loop = {
							array = ROOT.ai_setting_target_countries
								
							if = {
								limit = {
									meta_trigger = {
										text = {
											NOT = { has_idea = ai_diff_navy_[X] }
										}
										X = "[?lvl]"
									}
								}
								remove_ideas = {
									ai_diff_navy_1
									ai_diff_navy_2
									ai_diff_navy_3
									ai_diff_navy_4
								}
								meta_effect = {
									text = {
										add_ideas = ai_diff_navy_[X]
									}
									X = "[?lvl]"
								}
							}
						}
					}
					else = {
						for_each_scope_loop = {
							array = ROOT.ai_setting_target_countries
								
							remove_ideas = {
								ai_diff_navy_1
								ai_diff_navy_2
								ai_diff_navy_3
								ai_diff_navy_4
							}
						}
					}
				}
			}
			
			construction_bar_click = { 
				effect_tooltip = {
					every_country = { limit = { is_in_array = { ROOT.ai_setting_target_countries = THIS } }
						if = {
							limit = {
					 			has_idea = ai_diff_construction_1
		 					}
							show_ideas_tooltip = ai_diff_construction_1
						}
						else_if = {
							limit = {
								has_idea = ai_diff_construction_2
							}
							show_ideas_tooltip = ai_diff_construction_2
						}
						else_if = {
							limit = {
								has_idea = ai_diff_construction_3
							}
							show_ideas_tooltip = ai_diff_construction_3
						}
						else_if = {
							limit = {
								has_idea = ai_diff_construction_4
							}
							show_ideas_tooltip = ai_diff_construction_4
						}
					}
				}
			}
			construction_up_click = {
				effect_tooltip = {
					every_country = { limit = { is_in_array = { ROOT.ai_setting_target_countries = THIS } }
						if = {
							limit = {
								has_idea = ai_diff_construction_1
							}
							swap_ideas = {
								add_idea = ai_diff_construction_2
								remove_idea = ai_diff_construction_1
							}
						}
						else_if = {
							limit = {
								has_idea = ai_diff_construction_2
							}
							swap_ideas = {
								add_idea = ai_diff_construction_3
								remove_idea = ai_diff_construction_2
							}
						}
						else_if = {
							limit = {
								has_idea = ai_diff_construction_3
							}
							swap_ideas = {
								add_idea = ai_diff_construction_4
								remove_idea = ai_diff_construction_3
							}
						}
						else_if = {
							limit = {
								NOT = { has_idea = ai_diff_construction_4 }
							}
							add_ideas = ai_diff_construction_1
						}
					}
				}
				var:ROOT.selected_target = {
					add_to_variable = { ai_diff_construction = 25 }
					clamp_variable = { var = ai_diff_construction max = 100 }
					
					set_temp_variable = { lvl = ai_diff_construction }
					
					if = {
						limit = {
							check_variable = { lvl > 0 }
						}
						divide_temp_variable = { lvl = 25 }
						for_each_scope_loop = {
							array = ROOT.ai_setting_target_countries
								
							if = {
								limit = {
									meta_trigger = {
										text = {
											NOT = { has_idea = ai_diff_construction_[X] }
										}
										X = "[?lvl]"
									}
								}
								remove_ideas = {
									ai_diff_construction_1
									ai_diff_construction_2
									ai_diff_construction_3
									ai_diff_construction_4
								}
								meta_effect = {
									text = {
										add_ideas = ai_diff_construction_[X]
									}
									X = "[?lvl]"
								}
							}
						}
					}
				}
			}
			construction_down_click = {		
				effect_tooltip = {
					every_country = { limit = { is_in_array = { ROOT.ai_setting_target_countries = THIS } }
						if = {
							limit = {
								has_idea = ai_diff_construction_4
							}
							swap_ideas = {
								add_idea = ai_diff_construction_3
								remove_idea = ai_diff_construction_4
							}
						}
						else_if = {
							limit = {
								has_idea = ai_diff_construction_3
							}
							swap_ideas = {
								add_idea = ai_diff_construction_2
								remove_idea = ai_diff_construction_3
							}
						}
						else_if = {
							limit = {
								has_idea = ai_diff_construction_2
							}
							swap_ideas = {
								add_idea = ai_diff_construction_1
								remove_idea = ai_diff_construction_2
							}
						}
						else_if = {
							limit = {
								has_idea = ai_diff_construction_1
							}
							remove_ideas = ai_diff_construction_1
						}
					}
				}
				var:ROOT.selected_target = {
					add_to_variable = { ai_diff_construction = -25 }
					clamp_variable = { var = ai_diff_construction min = 0 }
					
					set_temp_variable = { lvl = ai_diff_construction }
					
					if = {
						limit = {
							check_variable = { lvl > 0 }
						}
						divide_temp_variable = { lvl = 25 }
						for_each_scope_loop = {
							array = ROOT.ai_setting_target_countries
								
							if = {
								limit = {
									meta_trigger = {
										text = {
											NOT = { has_idea = ai_diff_construction_[X] }
										}
										X = "[?lvl]"
									}
								}
								remove_ideas = {
									ai_diff_construction_1
									ai_diff_construction_2
									ai_diff_construction_3
									ai_diff_construction_4
								}
								meta_effect = {
									text = {
										add_ideas = ai_diff_construction_[X]
									}
									X = "[?lvl]"
								}
							}
						}
					}
					else = {
						for_each_scope_loop = {
							array = ROOT.ai_setting_target_countries
								
							remove_ideas = {
								ai_diff_construction_1
								ai_diff_construction_2
								ai_diff_construction_3
								ai_diff_construction_4
							}
						}
					}
				}
			}
			
			production_bar_click = { 
				effect_tooltip = {
					every_country = { limit = { is_in_array = { ROOT.ai_setting_target_countries = THIS } }
						if = {
							limit = {
					 			has_idea = ai_diff_production_1
		 					}
							show_ideas_tooltip = ai_diff_production_1
						}
						else_if = {
							limit = {
								has_idea = ai_diff_production_2
							}
							show_ideas_tooltip = ai_diff_production_2
						}
						else_if = {
							limit = {
								has_idea = ai_diff_production_3
							}
							show_ideas_tooltip = ai_diff_production_3
						}
						else_if = {
							limit = {
								has_idea = ai_diff_production_4
							}
							show_ideas_tooltip = ai_diff_production_4
						}
					}
				}
			}
			production_up_click = {
				effect_tooltip = {
					every_country = { limit = { is_in_array = { ROOT.ai_setting_target_countries = THIS } }
						if = {
							limit = {
								has_idea = ai_diff_production_1
							}
							swap_ideas = {
								add_idea = ai_diff_production_2
								remove_idea = ai_diff_production_1
							}
						}
						else_if = {
							limit = {
								has_idea = ai_diff_production_2
							}
							swap_ideas = {
								add_idea = ai_diff_production_3
								remove_idea = ai_diff_production_2
							}
						}
						else_if = {
							limit = {
								has_idea = ai_diff_production_3
							}
							swap_ideas = {
								add_idea = ai_diff_production_4
								remove_idea = ai_diff_production_3
							}
						}
						else_if = {
							limit = {
								NOT = { has_idea = ai_diff_production_4 }
							}
							add_ideas = ai_diff_production_1
						}
					}
				}
				var:ROOT.selected_target = {
					add_to_variable = { ai_diff_production = 25 }
					clamp_variable = { var = ai_diff_production max = 100 }
					
					set_temp_variable = { lvl = ai_diff_production }
					
					if = {
						limit = {
							check_variable = { lvl > 0 }
						}
						divide_temp_variable = { lvl = 25 }
						for_each_scope_loop = {
							array = ROOT.ai_setting_target_countries
								
							if = {
								limit = {
									meta_trigger = {
										text = {
											NOT = { has_idea = ai_diff_production_[X] }
										}
										X = "[?lvl]"
									}
								}
								remove_ideas = {
									ai_diff_production_1
									ai_diff_production_2
									ai_diff_production_3
									ai_diff_production_4
								}
								meta_effect = {
									text = {
										add_ideas = ai_diff_production_[X]
									}
									X = "[?lvl]"
								}
							}
						}
					}
				}
			}
			production_down_click = {			
				effect_tooltip = {
					every_country = { limit = { is_in_array = { ROOT.ai_setting_target_countries = THIS } }
						if = {
							limit = {
								has_idea = ai_diff_production_4
							}
							swap_ideas = {
								add_idea = ai_diff_production_3
								remove_idea = ai_diff_production_4
							}
						}
						else_if = {
							limit = {
								has_idea = ai_diff_production_3
							}
							swap_ideas = {
								add_idea = ai_diff_production_2
								remove_idea = ai_diff_production_3
							}
						}
						else_if = {
							limit = {
								has_idea = ai_diff_production_2
							}
							swap_ideas = {
								add_idea = ai_diff_production_1
								remove_idea = ai_diff_production_2
							}
						}
						else_if = {
							limit = {
								has_idea = ai_diff_production_1
							}
							remove_ideas = ai_diff_production_1
						}
					}
				}
								
				var:ROOT.selected_target = {
					add_to_variable = { ai_diff_production = -25 }
					clamp_variable = { var = ai_diff_production min = 0 }
					
					set_temp_variable = { lvl = ai_diff_production }
					
					if = {
						limit = {
							check_variable = { lvl > 0 }
						}
						divide_temp_variable = { lvl = 25 }
						for_each_scope_loop = {
							array = ROOT.ai_setting_target_countries
								
							if = {
								limit = {
									meta_trigger = {
										text = {
											NOT = { has_idea = ai_diff_production_[X] }
										}
										X = "[?lvl]"
									}
								}
								remove_ideas = {
									ai_diff_production_1
									ai_diff_production_2
									ai_diff_production_3
									ai_diff_production_4
								}
								meta_effect = {
									text = {
										add_ideas = ai_diff_production_[X]
									}
									X = "[?lvl]"
								}
							}
						}
					}
					else = {
						for_each_scope_loop = {
							array = ROOT.ai_setting_target_countries
								
							remove_ideas = {
								ai_diff_production_1
								ai_diff_production_2
								ai_diff_production_3
								ai_diff_production_4
							}
						}
					}
				}
			} 			
			
		  # Nerfs
			politics_nerf_bar_click = { 
				effect_tooltip = {
					every_country = { limit = { is_in_array = { ROOT.ai_setting_target_countries = THIS } }
						if = {
							limit = {
								has_idea = ai_diff_politics_nerf_1
							}
							show_ideas_tooltip = ai_diff_politics_nerf_1
						}
						else_if = {
							limit = {
								has_idea = ai_diff_politics_nerf_2
							}
							show_ideas_tooltip = ai_diff_politics_nerf_2
						}
						else_if = {
							limit = {
								has_idea = ai_diff_politics_nerf_3
							}
							show_ideas_tooltip = ai_diff_politics_nerf_3
						}
						else_if = {
							limit = {
								has_idea = ai_diff_politics_nerf_4
							}
							show_ideas_tooltip = ai_diff_politics_nerf_4
						}
					}
				}
			}
			politics_nerf_up_click = {
				effect_tooltip = {
					every_country = { limit = { is_in_array = { ROOT.ai_setting_target_countries = THIS } }
						if = {
							limit = {
								has_idea = ai_diff_politics_nerf_1
							}
							swap_ideas = {
								add_idea = ai_diff_politics_nerf_2
								remove_idea = ai_diff_politics_nerf_1
							}
						}
						else_if = {
							limit = {
								has_idea = ai_diff_politics_nerf_2
							}
							swap_ideas = {
								add_idea = ai_diff_politics_nerf_3
								remove_idea = ai_diff_politics_nerf_2
							}
						}
						else_if = {
							limit = {
								has_idea = ai_diff_politics_nerf_3
							}
							swap_ideas = {
								add_idea = ai_diff_politics_nerf_4
								remove_idea = ai_diff_politics_nerf_3
							}
						}
						else_if = {
							limit = {
								NOT = { has_idea = ai_diff_politics_nerf_4 }
							}
							add_ideas = ai_diff_politics_nerf_1
						}
					}
				}
				var:ROOT.selected_target = {
					add_to_variable = { ai_diff_politics_nerf = 25 }
					clamp_variable = { var = ai_diff_politics_nerf max = 100 }
					
					set_temp_variable = { lvl = ai_diff_politics_nerf }
					
					if = {
						limit = {
							check_variable = { lvl > 0 }
						}
						divide_temp_variable = { lvl = 25 }
						for_each_scope_loop = {
							array = ROOT.ai_setting_target_countries
								
							if = {
								limit = {
									meta_trigger = {
										text = {
											NOT = { has_idea = ai_diff_politics_nerf_[X] }
										}
										X = "[?lvl]"
									}
								}
								remove_ideas = {
									ai_diff_politics_nerf_1
									ai_diff_politics_nerf_2
									ai_diff_politics_nerf_3
									ai_diff_politics_nerf_4
								}
								meta_effect = {
									text = {
										add_ideas = ai_diff_politics_nerf_[X]
									}
									X = "[?lvl]"
								}
							}
						}
					}
				}
			}
			politics_nerf_down_click = {		
				effect_tooltip = {
					every_country = { limit = { is_in_array = { ROOT.ai_setting_target_countries = THIS } }
						if = {
							limit = {
								has_idea = ai_diff_politics_nerf_4
							}
							swap_ideas = {
								add_idea = ai_diff_politics_nerf_3
								remove_idea = ai_diff_politics_nerf_4
							}
						}
						else_if = {
							limit = {
								has_idea = ai_diff_politics_nerf_3
							}
							swap_ideas = {
								add_idea = ai_diff_politics_nerf_2
								remove_idea = ai_diff_politics_nerf_3
							}
						}
						else_if = {
							limit = {
								has_idea = ai_diff_politics_nerf_2
							}
							swap_ideas = {
								add_idea = ai_diff_politics_nerf_1
								remove_idea = ai_diff_politics_nerf_2
							}
						}
						else_if = {
							limit = {
								has_idea = ai_diff_politics_nerf_1
							}
							remove_ideas = ai_diff_politics_nerf_1
						}
					}
				}
				var:ROOT.selected_target = {
					add_to_variable = { ai_diff_politics_nerf = -25 }
					clamp_variable = { var = ai_diff_politics_nerf min = 0 }
					
					set_temp_variable = { lvl = ai_diff_politics_nerf }
					
					if = {
						limit = {
							check_variable = { lvl > 0 }
						}
						divide_temp_variable = { lvl = 25 }
						for_each_scope_loop = {
							array = ROOT.ai_setting_target_countries
								
							if = {
								limit = {
									meta_trigger = {
										text = {
											NOT = { has_idea = ai_diff_politics_nerf_[X] }
										}
										X = "[?lvl]"
									}
								}
								remove_ideas = {
									ai_diff_politics_nerf_1
									ai_diff_politics_nerf_2
									ai_diff_politics_nerf_3
									ai_diff_politics_nerf_4
								}
								meta_effect = {
									text = {
										add_ideas = ai_diff_politics_nerf_[X]
									}
									X = "[?lvl]"
								}
							}
						}
					}
					else = {
						for_each_scope_loop = {
							array = ROOT.ai_setting_target_countries
								
							remove_ideas = {
								ai_diff_politics_nerf_1
								ai_diff_politics_nerf_2
								ai_diff_politics_nerf_3
								ai_diff_politics_nerf_4
							}
						}
					}
				}
			}
			
			army_nerf_bar_click = { 
				effect_tooltip = {
					every_country = { limit = { is_in_array = { ROOT.ai_setting_target_countries = THIS } }
						if = {
							limit = {
								has_idea = ai_diff_army_nerf_1
							}
							show_ideas_tooltip = ai_diff_army_nerf_1
						}
						else_if = {
							limit = {
								has_idea = ai_diff_army_nerf_2
							}
							show_ideas_tooltip = ai_diff_army_nerf_2
						}
						else_if = {
							limit = {
								has_idea = ai_diff_army_nerf_3
							}
							show_ideas_tooltip = ai_diff_army_nerf_3
						}
						else_if = {
							limit = {
								has_idea = ai_diff_army_nerf_4
							}
							show_ideas_tooltip = ai_diff_army_nerf_4
						}
					}
				}
			}
			army_nerf_up_click = {
				effect_tooltip = {
					every_country = { limit = { is_in_array = { ROOT.ai_setting_target_countries = THIS } }
						if = {
							limit = {
								has_idea = ai_diff_army_nerf_1
							}
							swap_ideas = {
								add_idea = ai_diff_army_nerf_2
								remove_idea = ai_diff_army_nerf_1
							}
						}
						else_if = {
							limit = {
								has_idea = ai_diff_army_nerf_2
							}
							swap_ideas = {
								add_idea = ai_diff_army_nerf_3
								remove_idea = ai_diff_army_nerf_2
							}
						}
						else_if = {
							limit = {
								has_idea = ai_diff_army_nerf_3
							}
							swap_ideas = {
								add_idea = ai_diff_army_nerf_4
								remove_idea = ai_diff_army_nerf_3
							}
						}
						else_if = {
							limit = {
								NOT = { has_idea = ai_diff_army_nerf_4 }
							}
							add_ideas = ai_diff_army_nerf_1
						}
					}
				}
				var:ROOT.selected_target = {
					add_to_variable = { ai_diff_army_nerf = 25 }
					clamp_variable = { var = ai_diff_army_nerf max = 100 }
					
					set_temp_variable = { lvl = ai_diff_army_nerf }
					
					if = {
						limit = {
							check_variable = { lvl > 0 }
						}
						divide_temp_variable = { lvl = 25 }
						for_each_scope_loop = {
							array = ROOT.ai_setting_target_countries
								
							if = {
								limit = {
									meta_trigger = {
										text = {
											NOT = { has_idea = ai_diff_army_nerf_[X] }
										}
										X = "[?lvl]"
									}
								}
								remove_ideas = {
									ai_diff_army_nerf_1
									ai_diff_army_nerf_2
									ai_diff_army_nerf_3
									ai_diff_army_nerf_4
								}
								meta_effect = {
									text = {
										add_ideas = ai_diff_army_nerf_[X]
									}
									X = "[?lvl]"
								}
							}
						}
					}
				}
			}
			army_nerf_down_click = {		
				effect_tooltip = {
					every_country = { limit = { is_in_array = { ROOT.ai_setting_target_countries = THIS } }
						if = {
							limit = {
								has_idea = ai_diff_army_nerf_4
							}
							swap_ideas = {
								add_idea = ai_diff_army_nerf_3
								remove_idea = ai_diff_army_nerf_4
							}
						}
						else_if = {
							limit = {
								has_idea = ai_diff_army_nerf_3
							}
							swap_ideas = {
								add_idea = ai_diff_army_nerf_2
								remove_idea = ai_diff_army_nerf_3
							}
						}
						else_if = {
							limit = {
								has_idea = ai_diff_army_nerf_2
							}
							swap_ideas = {
								add_idea = ai_diff_army_nerf_1
								remove_idea = ai_diff_army_nerf_2
							}
						}
						else_if = {
							limit = {
								has_idea = ai_diff_army_nerf_1
							}
							remove_ideas = ai_diff_army_nerf_1
						}
					}
				}
				var:ROOT.selected_target = {
					add_to_variable = { ai_diff_army_nerf = -25 }
					clamp_variable = { var = ai_diff_army_nerf min = 0 }
					
					set_temp_variable = { lvl = ai_diff_army_nerf }
					
					if = {
						limit = {
							check_variable = { lvl > 0 }
						}
						divide_temp_variable = { lvl = 25 }
						for_each_scope_loop = {
							array = ROOT.ai_setting_target_countries
								
							if = {
								limit = {
									meta_trigger = {
										text = {
											NOT = { has_idea = ai_diff_army_nerf_[X] }
										}
										X = "[?lvl]"
									}
								}
								remove_ideas = {
									ai_diff_army_nerf_1
									ai_diff_army_nerf_2
									ai_diff_army_nerf_3
									ai_diff_army_nerf_4
								}
								meta_effect = {
									text = {
										add_ideas = ai_diff_army_nerf_[X]
									}
									X = "[?lvl]"
								}
							}
						}
					}
					else = {
						for_each_scope_loop = {
							array = ROOT.ai_setting_target_countries
								
							remove_ideas = {
								ai_diff_army_nerf_1
								ai_diff_army_nerf_2
								ai_diff_army_nerf_3
								ai_diff_army_nerf_4
							}
						}
					}
				}
			}
			
			air_nerf_bar_click = { 
				effect_tooltip = {
					every_country = { limit = { is_in_array = { ROOT.ai_setting_target_countries = THIS } }
						if = {
							limit = {
								has_idea = ai_diff_air_nerf_1
							}
							show_ideas_tooltip = ai_diff_air_nerf_1
						}
						else_if = {
							limit = {
								has_idea = ai_diff_air_nerf_2
							}
							show_ideas_tooltip = ai_diff_air_nerf_2
						}
						else_if = {
							limit = {
								has_idea = ai_diff_air_nerf_3
							}
							show_ideas_tooltip = ai_diff_air_nerf_3
						}
						else_if = {
							limit = {
								has_idea = ai_diff_air_nerf_4
							}
							show_ideas_tooltip = ai_diff_air_nerf_4
						}
					}
				}
			}
			air_nerf_up_click = {
				effect_tooltip = {
					every_country = { limit = { is_in_array = { ROOT.ai_setting_target_countries = THIS } }
						if = {
							limit = {
								has_idea = ai_diff_air_nerf_1
							}
							swap_ideas = {
								add_idea = ai_diff_air_nerf_2
								remove_idea = ai_diff_air_nerf_1
							}
						}
						else_if = {
							limit = {
								has_idea = ai_diff_air_nerf_2
							}
							swap_ideas = {
								add_idea = ai_diff_air_nerf_3
								remove_idea = ai_diff_air_nerf_2
							}
						}
						else_if = {
							limit = {
								has_idea = ai_diff_air_nerf_3
							}
							swap_ideas = {
								add_idea = ai_diff_air_nerf_4
								remove_idea = ai_diff_air_nerf_3
							}
						}
						else_if = {
							limit = {
								NOT = { has_idea = ai_diff_air_nerf_4 }
							}
							add_ideas = ai_diff_air_nerf_1
						}
					}
				}
				var:ROOT.selected_target = {
					add_to_variable = { ai_diff_air_nerf = 25 }
					clamp_variable = { var = ai_diff_air_nerf max = 100 }
					
					set_temp_variable = { lvl = ai_diff_air_nerf }
					
					if = {
						limit = {
							check_variable = { lvl > 0 }
						}
						divide_temp_variable = { lvl = 25 }
						for_each_scope_loop = {
							array = ROOT.ai_setting_target_countries
								
							if = {
								limit = {
									meta_trigger = {
										text = {
											NOT = { has_idea = ai_diff_air_nerf_[X] }
										}
										X = "[?lvl]"
									}
								}
								remove_ideas = {
									ai_diff_air_nerf_1
									ai_diff_air_nerf_2
									ai_diff_air_nerf_3
									ai_diff_air_nerf_4
								}
								meta_effect = {
									text = {
										add_ideas = ai_diff_air_nerf_[X]
									}
									X = "[?lvl]"
								}
							}
						}
					}
				}
			}
			air_nerf_down_click = {		
				effect_tooltip = {
					every_country = { limit = { is_in_array = { ROOT.ai_setting_target_countries = THIS } }
						if = {
							limit = {
								has_idea = ai_diff_air_nerf_4
							}
							swap_ideas = {
								add_idea = ai_diff_air_nerf_3
								remove_idea = ai_diff_air_nerf_4
							}
						}
						else_if = {
							limit = {
								has_idea = ai_diff_air_nerf_3
							}
							swap_ideas = {
								add_idea = ai_diff_air_nerf_2
								remove_idea = ai_diff_air_nerf_3
							}
						}
						else_if = {
							limit = {
								has_idea = ai_diff_air_nerf_2
							}
							swap_ideas = {
								add_idea = ai_diff_air_nerf_1
								remove_idea = ai_diff_air_nerf_2
							}
						}
						else_if = {
							limit = {
								has_idea = ai_diff_air_nerf_1
							}
							remove_ideas = ai_diff_air_nerf_1
						}
					}
				}
				var:ROOT.selected_target = {
					add_to_variable = { ai_diff_air_nerf = -25 }
					clamp_variable = { var = ai_diff_air_nerf min = 0 }
					
					set_temp_variable = { lvl = ai_diff_air_nerf }
					
					if = {
						limit = {
							check_variable = { lvl > 0 }
						}
						divide_temp_variable = { lvl = 25 }
						for_each_scope_loop = {
							array = ROOT.ai_setting_target_countries
								
							if = {
								limit = {
									meta_trigger = {
										text = {
											NOT = { has_idea = ai_diff_air_nerf_[X] }
										}
										X = "[?lvl]"
									}
								}
								remove_ideas = {
									ai_diff_air_nerf_1
									ai_diff_air_nerf_2
									ai_diff_air_nerf_3
									ai_diff_air_nerf_4
								}
								meta_effect = {
									text = {
										add_ideas = ai_diff_air_nerf_[X]
									}
									X = "[?lvl]"
								}
							}
						}
					}
					else = {
						for_each_scope_loop = {
							array = ROOT.ai_setting_target_countries
								
							remove_ideas = {
								ai_diff_air_nerf_1
								ai_diff_air_nerf_2
								ai_diff_air_nerf_3
								ai_diff_air_nerf_4
							}
						}
					}
				}
			}
			
			navy_nerf_bar_click = { 
				effect_tooltip = {
					every_country = { limit = { is_in_array = { ROOT.ai_setting_target_countries = THIS } }
						if = {
							limit = {
								has_idea = ai_diff_navy_nerf_1
							}
							show_ideas_tooltip = ai_diff_navy_nerf_1
						}
						else_if = {
							limit = {
								has_idea = ai_diff_navy_nerf_2
							}
							show_ideas_tooltip = ai_diff_navy_nerf_2
						}
						else_if = {
							limit = {
								has_idea = ai_diff_navy_nerf_3
							}
							show_ideas_tooltip = ai_diff_navy_nerf_3
						}
						else_if = {
							limit = {
								has_idea = ai_diff_navy_nerf_4
							}
							show_ideas_tooltip = ai_diff_navy_nerf_4
						}
					}
				}
			}
			navy_nerf_up_click = {
				effect_tooltip = {
					every_country = { limit = { is_in_array = { ROOT.ai_setting_target_countries = THIS } }
						if = {
							limit = {
								has_idea = ai_diff_navy_nerf_1
							}
							swap_ideas = {
								add_idea = ai_diff_navy_nerf_2
								remove_idea = ai_diff_navy_nerf_1
							}
						}
						else_if = {
							limit = {
								has_idea = ai_diff_navy_nerf_2
							}
							swap_ideas = {
								add_idea = ai_diff_navy_nerf_3
								remove_idea = ai_diff_navy_nerf_2
							}
						}
						else_if = {
							limit = {
								has_idea = ai_diff_navy_nerf_3
							}
							swap_ideas = {
								add_idea = ai_diff_navy_nerf_4
								remove_idea = ai_diff_navy_nerf_3
							}
						}
						else_if = {
							limit = {
								NOT = { has_idea = ai_diff_navy_nerf_4 }
							}
							add_ideas = ai_diff_navy_nerf_1
						}
					}
				}
				var:ROOT.selected_target = {
					add_to_variable = { ai_diff_navy_nerf = 25 }
					clamp_variable = { var = ai_diff_navy_nerf max = 100 }
					
					set_temp_variable = { lvl = ai_diff_navy_nerf }
					
					if = {
						limit = {
							check_variable = { lvl > 0 }
						}
						divide_temp_variable = { lvl = 25 }
						for_each_scope_loop = {
							array = ROOT.ai_setting_target_countries
								
							if = {
								limit = {
									meta_trigger = {
										text = {
											NOT = { has_idea = ai_diff_navy_nerf_[X] }
										}
										X = "[?lvl]"
									}
								}
								remove_ideas = {
									ai_diff_navy_nerf_1
									ai_diff_navy_nerf_2
									ai_diff_navy_nerf_3
									ai_diff_navy_nerf_4
								}
								meta_effect = {
									text = {
										add_ideas = ai_diff_navy_nerf_[X]
									}
									X = "[?lvl]"
								}
							}
						}
					}
				}
			}
			navy_nerf_down_click = {		
				effect_tooltip = {
					every_country = { limit = { is_in_array = { ROOT.ai_setting_target_countries = THIS } }
						if = {
							limit = {
								has_idea = ai_diff_navy_nerf_4
							}
							swap_ideas = {
								add_idea = ai_diff_navy_nerf_3
								remove_idea = ai_diff_navy_nerf_4
							}
						}
						else_if = {
							limit = {
								has_idea = ai_diff_navy_nerf_3
							}
							swap_ideas = {
								add_idea = ai_diff_navy_nerf_2
								remove_idea = ai_diff_navy_nerf_3
							}
						}
						else_if = {
							limit = {
								has_idea = ai_diff_navy_nerf_2
							}
							swap_ideas = {
								add_idea = ai_diff_navy_nerf_1
								remove_idea = ai_diff_navy_nerf_2
							}
						}
						else_if = {
							limit = {
								has_idea = ai_diff_navy_nerf_1
							}
							remove_ideas = ai_diff_navy_nerf_1
						}
					}
				}
				var:ROOT.selected_target = {
					add_to_variable = { ai_diff_navy_nerf = -25 }
					clamp_variable = { var = ai_diff_navy_nerf min = 0 }
					
					set_temp_variable = { lvl = ai_diff_navy_nerf }
					
					if = {
						limit = {
							check_variable = { lvl > 0 }
						}
						divide_temp_variable = { lvl = 25 }
						for_each_scope_loop = {
							array = ROOT.ai_setting_target_countries
								
							if = {
								limit = {
									meta_trigger = {
										text = {
											NOT = { has_idea = ai_diff_navy_nerf_[X] }
										}
										X = "[?lvl]"
									}
								}
								remove_ideas = {
									ai_diff_navy_nerf_1
									ai_diff_navy_nerf_2
									ai_diff_navy_nerf_3
									ai_diff_navy_nerf_4
								}
								meta_effect = {
									text = {
										add_ideas = ai_diff_navy_nerf_[X]
									}
									X = "[?lvl]"
								}
							}
						}
					}
					else = {
						for_each_scope_loop = {
							array = ROOT.ai_setting_target_countries
								
							remove_ideas = {
								ai_diff_navy_nerf_1
								ai_diff_navy_nerf_2
								ai_diff_navy_nerf_3
								ai_diff_navy_nerf_4
							}
						}
					}
				}
			}
			
			construction_nerf_bar_click = { 
				effect_tooltip = {
					every_country = { limit = { is_in_array = { ROOT.ai_setting_target_countries = THIS } }
						if = {
							limit = {
								has_idea = ai_diff_construction_nerf_1
							}
							show_ideas_tooltip = ai_diff_construction_nerf_1
						}
						else_if = {
							limit = {
								has_idea = ai_diff_construction_nerf_2
							}
							show_ideas_tooltip = ai_diff_construction_nerf_2
						}
						else_if = {
							limit = {
								has_idea = ai_diff_construction_nerf_3
							}
							show_ideas_tooltip = ai_diff_construction_nerf_3
						}
						else_if = {
							limit = {
								has_idea = ai_diff_construction_nerf_4
							}
							show_ideas_tooltip = ai_diff_construction_nerf_4
						}
					}
				}
			}
			construction_nerf_up_click = {
				effect_tooltip = {
					every_country = { limit = { is_in_array = { ROOT.ai_setting_target_countries = THIS } }
						if = {
							limit = {
								has_idea = ai_diff_construction_nerf_1
							}
							swap_ideas = {
								add_idea = ai_diff_construction_nerf_2
								remove_idea = ai_diff_construction_nerf_1
							}
						}
						else_if = {
							limit = {
								has_idea = ai_diff_construction_nerf_2
							}
							swap_ideas = {
								add_idea = ai_diff_construction_nerf_3
								remove_idea = ai_diff_construction_nerf_2
							}
						}
						else_if = {
							limit = {
								has_idea = ai_diff_construction_nerf_3
							}
							swap_ideas = {
								add_idea = ai_diff_construction_nerf_4
								remove_idea = ai_diff_construction_nerf_3
							}
						}
						else_if = {
							limit = {
								NOT = { has_idea = ai_diff_construction_nerf_4 }
							}
							add_ideas = ai_diff_construction_nerf_1
						}
					}
				}
				var:ROOT.selected_target = {
					add_to_variable = { ai_diff_construction_nerf = 25 }
					clamp_variable = { var = ai_diff_construction_nerf max = 100 }
					
					set_temp_variable = { lvl = ai_diff_construction_nerf }
					
					if = {
						limit = {
							check_variable = { lvl > 0 }
						}
						divide_temp_variable = { lvl = 25 }
						for_each_scope_loop = {
							array = ROOT.ai_setting_target_countries
								
							if = {
								limit = {
									meta_trigger = {
										text = {
											NOT = { has_idea = ai_diff_construction_nerf_[X] }
										}
										X = "[?lvl]"
									}
								}
								remove_ideas = {
									ai_diff_construction_nerf_1
									ai_diff_construction_nerf_2
									ai_diff_construction_nerf_3
									ai_diff_construction_nerf_4
								}
								meta_effect = {
									text = {
										add_ideas = ai_diff_construction_nerf_[X]
									}
									X = "[?lvl]"
								}
							}
						}
					}
				}
			}
			construction_nerf_down_click = {		
				effect_tooltip = {
					every_country = { limit = { is_in_array = { ROOT.ai_setting_target_countries = THIS } }
						if = {
							limit = {
								has_idea = ai_diff_construction_nerf_4
							}
							swap_ideas = {
								add_idea = ai_diff_construction_nerf_3
								remove_idea = ai_diff_construction_nerf_4
							}
						}
						else_if = {
							limit = {
								has_idea = ai_diff_construction_nerf_3
							}
							swap_ideas = {
								add_idea = ai_diff_construction_nerf_2
								remove_idea = ai_diff_construction_nerf_3
							}
						}
						else_if = {
							limit = {
								has_idea = ai_diff_construction_nerf_2
							}
							swap_ideas = {
								add_idea = ai_diff_construction_nerf_1
								remove_idea = ai_diff_construction_nerf_2
							}
						}
						else_if = {
							limit = {
								has_idea = ai_diff_construction_nerf_1
							}
							remove_ideas = ai_diff_construction_nerf_1
						}
					}
				}
				var:ROOT.selected_target = {
					add_to_variable = { ai_diff_construction_nerf = -25 }
					clamp_variable = { var = ai_diff_construction_nerf min = 0 }
					
					set_temp_variable = { lvl = ai_diff_construction_nerf }
					
					if = {
						limit = {
							check_variable = { lvl > 0 }
						}
						divide_temp_variable = { lvl = 25 }
						for_each_scope_loop = {
							array = ROOT.ai_setting_target_countries
								
							if = {
								limit = {
									meta_trigger = {
										text = {
											NOT = { has_idea = ai_diff_construction_nerf_[X] }
										}
										X = "[?lvl]"
									}
								}
								remove_ideas = {
									ai_diff_construction_nerf_1
									ai_diff_construction_nerf_2
									ai_diff_construction_nerf_3
									ai_diff_construction_nerf_4
								}
								meta_effect = {
									text = {
										add_ideas = ai_diff_construction_nerf_[X]
									}
									X = "[?lvl]"
								}
							}
						}
					}
					else = {
						for_each_scope_loop = {
							array = ROOT.ai_setting_target_countries
								
							remove_ideas = {
								ai_diff_construction_nerf_1
								ai_diff_construction_nerf_2
								ai_diff_construction_nerf_3
								ai_diff_construction_nerf_4
							}
						}
					}
				}
			}
			
			production_nerf_bar_click = { 
				effect_tooltip = {
					every_country = { limit = { is_in_array = { ROOT.ai_setting_target_countries = THIS } }
						if = {
							limit = {
								has_idea = ai_diff_production_nerf_1
							}
							show_ideas_tooltip = ai_diff_production_nerf_1
						}
						else_if = {
							limit = {
								has_idea = ai_diff_production_nerf_2
							}
							show_ideas_tooltip = ai_diff_production_nerf_2
						}
						else_if = {
							limit = {
								has_idea = ai_diff_production_nerf_3
							}
							show_ideas_tooltip = ai_diff_production_nerf_3
						}
						else_if = {
							limit = {
								has_idea = ai_diff_production_nerf_4
							}
							show_ideas_tooltip = ai_diff_production_nerf_4
						}
					}
				}
			}
			production_nerf_up_click = {
				effect_tooltip = {
					every_country = { limit = { is_in_array = { ROOT.ai_setting_target_countries = THIS } }
						if = {
							limit = {
								has_idea = ai_diff_production_nerf_1
							}
							swap_ideas = {
								add_idea = ai_diff_production_nerf_2
								remove_idea = ai_diff_production_nerf_1
							}
						}
						else_if = {
							limit = {
								has_idea = ai_diff_production_nerf_2
							}
							swap_ideas = {
								add_idea = ai_diff_production_nerf_3
								remove_idea = ai_diff_production_nerf_2
							}
						}
						else_if = {
							limit = {
								has_idea = ai_diff_production_nerf_3
							}
							swap_ideas = {
								add_idea = ai_diff_production_nerf_4
								remove_idea = ai_diff_production_nerf_3
							}
						}
						else_if = {
							limit = {
								NOT = { has_idea = ai_diff_production_nerf_4 }
							}
							add_ideas = ai_diff_production_nerf_1
						}
					}
				}
				var:ROOT.selected_target = {
					add_to_variable = { ai_diff_production_nerf = 25 }
					clamp_variable = { var = ai_diff_production_nerf max = 100 }
					
					set_temp_variable = { lvl = ai_diff_production_nerf }
					
					if = {
						limit = {
							check_variable = { lvl > 0 }
						}
						divide_temp_variable = { lvl = 25 }
						for_each_scope_loop = {
							array = ROOT.ai_setting_target_countries
								
							if = {
								limit = {
									meta_trigger = {
										text = {
											NOT = { has_idea = ai_diff_production_nerf_[X] }
										}
										X = "[?lvl]"
									}
								}
								remove_ideas = {
									ai_diff_production_nerf_1
									ai_diff_production_nerf_2
									ai_diff_production_nerf_3
									ai_diff_production_nerf_4
								}
								meta_effect = {
									text = {
										add_ideas = ai_diff_production_nerf_[X]
									}
									X = "[?lvl]"
								}
							}
						}
					}
				}
			}
			production_nerf_down_click = {			
				effect_tooltip = {
					every_country = { limit = { is_in_array = { ROOT.ai_setting_target_countries = THIS } }
						if = {
							limit = {
								has_idea = ai_diff_production_nerf_4
							}
							swap_ideas = {
								add_idea = ai_diff_production_nerf_3
								remove_idea = ai_diff_production_nerf_4
							}
						}
						else_if = {
							limit = {
								has_idea = ai_diff_production_nerf_3
							}
							swap_ideas = {
								add_idea = ai_diff_production_nerf_2
								remove_idea = ai_diff_production_nerf_3
							}
						}
						else_if = {
							limit = {
								has_idea = ai_diff_production_nerf_2
							}
							swap_ideas = {
								add_idea = ai_diff_production_nerf_1
								remove_idea = ai_diff_production_nerf_2
							}
						}
						else_if = {
							limit = {
								has_idea = ai_diff_production_nerf_1
							}
							remove_ideas = ai_diff_production_nerf_1
						}
					}
				}
								
				var:ROOT.selected_target = {
					add_to_variable = { ai_diff_production_nerf = -25 }
					clamp_variable = { var = ai_diff_production_nerf min = 0 }
					
					set_temp_variable = { lvl = ai_diff_production_nerf }
					
					if = {
						limit = {
							check_variable = { lvl > 0 }
						}
						divide_temp_variable = { lvl = 25 }
						for_each_scope_loop = {
							array = ROOT.ai_setting_target_countries
								
							if = {
								limit = {
									meta_trigger = {
										text = {
											NOT = { has_idea = ai_diff_production_nerf_[X] }
										}
										X = "[?lvl]"
									}
								}
								remove_ideas = {
									ai_diff_production_nerf_1
									ai_diff_production_nerf_2
									ai_diff_production_nerf_3
									ai_diff_production_nerf_4
								}
								meta_effect = {
									text = {
										add_ideas = ai_diff_production_nerf_[X]
									}
									X = "[?lvl]"
								}
							}
						}
					}
					else = {
						for_each_scope_loop = {
							array = ROOT.ai_setting_target_countries
								
							remove_ideas = {
								ai_diff_production_nerf_1
								ai_diff_production_nerf_2
								ai_diff_production_nerf_3
								ai_diff_production_nerf_4
							}
						}
					}
				}
			} 	
		}
	}

}
on_actions = {

	on_startup = {
		effect = {
			SWE = {
				anti_cross_faction_trade_all = yes
				SPR = {
					add_opinion_modifier = {
						target = SOV
						modifier = anti_cross_faction_trade
					}
				}
			}
		}
	}
	
	on_weekly_FRA = {
		effect = {
			if = {
				limit = {
					NOT = {
						has_global_flag = FRANCE_REMOVE_BUFF_CORE
					}
					date > 1939.9.1
					NOT = {
						VIC = {
							has_country_flag = VIC_france_capped
						}
					}
					FRA = {
						has_idea = FRA_defense_of_metropolitan_france
					}
				}
				set_global_flag = FRANCE_REMOVE_BUFF_CORE
				FRA = {
					remove_ideas = FRA_defense_of_metropolitan_france
				}
			}
		}
	}

	on_weekly_FRA = {
		effect = {
			if = {
				limit = {
					NOT = {
						has_global_flag = FRANCE_CRACKS_SWAP
					}
					date > 1940.3.1
					NOT = {
						VIC = {
							has_country_flag = VIC_france_capped
						}
					}
					FRA = {
						NOT = {
							has_idea = FRA_defense_of_metropolitan_france
						}
					}
				}
				set_global_flag = FRANCE_CRACKS_SWAP
				FRA = {
					add_ideas = FRA_cracks_in_the_army
				}
			}
		}
	}

	#Commonwealth Debuff for the AFRICA
	on_state_control_changed = {
		effect = {
			if = {
				limit = {
					FROM = { 
						OR = {
							is_in_faction_with = ENG 
							is_in_faction_with = USA 
							tag = ENG
							tag = USA
							tag = INS
							tag = FRA
						}
					}
					ROOT = { 
						OR = { 
							is_in_faction_with = GER 
							is_in_faction_with = JAP 
							tag = GER
							tag = JAP
							tag = VIC
							tag = ITA
						} 
					}
					FROM.FROM = {
						has_state_flag = AFRICA_COMMONWEALTH_controls
					}
				}
				FROM.FROM = {  
						set_state_flag = NOT_AFRICA_COMMONWEALTH_controls
						clr_state_flag = AFRICA_COMMONWEALTH_controls
				}
				if = {
					limit = {
					}
					every_country = {
						limit = {
							OR = {
								tag = FIN
								tag = GER
								tag = HUN
								tag = ITA
								tag = ROM
								tag = BUL
								tag = SPR
								tag = YUG
								tag = VIC
							}
						}
						AFRICA_COMMONWEALTH_AXIS_bases_level_down = yes
					}
				} else = {
					add_to_variable = {
						var = ITA.AFRICA_COMMONWEALTH_BASES_LEVEL
						value = 1
					}
				}

			}
		}
	}
	on_state_control_changed = {
		effect = {
			if = {
				limit = {
					FROM = { 
						OR = { 
							is_in_faction_with = GER 
							is_in_faction_with = JAP 
							tag = GER
							tag = JAP
							tag = ITA
							tag = VIC
						} 
					}
					ROOT = {
						OR = {
							is_in_faction_with = ENG 
							is_in_faction_with = USA 
							tag = ENG
							tag = FRA
							tag = USA
							tag = INS
						}
					}
					FROM.FROM = {
						has_state_flag = NOT_AFRICA_COMMONWEALTH_controls
					}
				}
				FROM.FROM = { 
						set_state_flag = AFRICA_COMMONWEALTH_controls
						clr_state_flag = NOT_AFRICA_COMMONWEALTH_controls
				}
				if = {
					limit = {
					}
					every_country = {
						limit = {
							OR = {
								tag = FIN
								tag = GER
								tag = HUN
								tag = ITA
								tag = ROM
								tag = BUL
								tag = SPR
								tag = YUG
								tag = VIC
							}
						}
						AFRICA_COMMONWEALTH_AXIS_bases_level_up = yes
					}
				} else = {
					subtract_from_variable = {
						var = ITA.AFRICA_COMMONWEALTH_BASES_LEVEL
						value = 1
						}
					}
				}
			}
		}
}
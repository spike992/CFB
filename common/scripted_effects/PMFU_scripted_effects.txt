anti_cross_faction_trade_axis = {
	add_opinion_modifier = {
		target = GER
		modifier = anti_cross_faction_trade
	}
	add_opinion_modifier = {
		target = ITA
		modifier = anti_cross_faction_trade
	}
	add_opinion_modifier = {
		target = SPR
		modifier = anti_cross_faction_trade
	}
	add_opinion_modifier = {
		target = HUN
		modifier = anti_cross_faction_trade
	}
	add_opinion_modifier = {
		target = ROM
		modifier = anti_cross_faction_trade
	}
	add_opinion_modifier = {
		target = BUL
		modifier = anti_cross_faction_trade
	}
	add_opinion_modifier = {
		target = FIN
		modifier = anti_cross_faction_trade
	}
	add_opinion_modifier = {
		target = YUG
		modifier = anti_cross_faction_trade
	}

	add_opinion_modifier = {
		target = JAP
		modifier = anti_cross_faction_trade
	}
	add_opinion_modifier = {
		target = MAN
		modifier = anti_cross_faction_trade
	}
	add_opinion_modifier = {
		target = SIA
		modifier = anti_cross_faction_trade
	}
}

anti_cross_faction_trade_allies = {
	add_opinion_modifier = {
		target = USA
		modifier = anti_cross_faction_trade
	}
	add_opinion_modifier = {
		target = ENG
		modifier = anti_cross_faction_trade
	}
	add_opinion_modifier = {
		target = FRA
		modifier = anti_cross_faction_trade
	}
	add_opinion_modifier = {
		target = CAN
		modifier = anti_cross_faction_trade
	}
	add_opinion_modifier = {
		target = SAF
		modifier = anti_cross_faction_trade
	}
	add_opinion_modifier = {
		target = RAJ
		modifier = anti_cross_faction_trade
	}
	add_opinion_modifier = {
		target = AST
		modifier = anti_cross_faction_trade
	}
	add_opinion_modifier = {
		target = NZL
		modifier = anti_cross_faction_trade
	}
	add_opinion_modifier = {
		target = BRA
		modifier = anti_cross_faction_trade
	}
	add_opinion_modifier = {
		target = MEX
		modifier = anti_cross_faction_trade
	}
	add_opinion_modifier = {
		target = HOL
		modifier = anti_cross_faction_trade
	}
	add_opinion_modifier = {
		target = MAL
		modifier = anti_cross_faction_trade
	}
	add_opinion_modifier = {
		target = IRE
		modifier = anti_cross_faction_trade
	}

	add_opinion_modifier = {
		target = SOV
		modifier = anti_cross_faction_trade
	}
	add_opinion_modifier = {
		target = MON
		modifier = anti_cross_faction_trade
	}
}

anti_cross_faction_trade_all = {
	# allies
	USA = {
		anti_cross_faction_trade_axis = yes
	}
	ENG = {
		anti_cross_faction_trade_axis = yes
	}
	FRA = {
		anti_cross_faction_trade_axis = yes
	}
	USA = {
		anti_cross_faction_trade_axis = yes
	}
	CAN = {
		anti_cross_faction_trade_axis = yes
	}
	SAF = {
		anti_cross_faction_trade_axis = yes
	}
	RAJ = {
		anti_cross_faction_trade_axis = yes
	}
	AST = {
		anti_cross_faction_trade_axis = yes
	}
	NZL = {
		anti_cross_faction_trade_axis = yes
	}
	BRA = {
		anti_cross_faction_trade_axis = yes
	}
	MEX = {
		anti_cross_faction_trade_axis = yes
	}
	HOL = {
		anti_cross_faction_trade_axis = yes
	}
	MAL = {
		anti_cross_faction_trade_axis = yes
	}
	IRE = {
		anti_cross_faction_trade_axis = yes
	}

	SOV = {
		anti_cross_faction_trade_axis = yes
	}
	MON = {
		anti_cross_faction_trade_axis = yes
	}
	# axis
	GER = {
		anti_cross_faction_trade_allies = yes
	}
	ITA = {
		anti_cross_faction_trade_allies = yes
	}
	SPR = {
		anti_cross_faction_trade_allies = yes
	}
	HUN = {
		anti_cross_faction_trade_allies = yes
	}
	ROM = {
		anti_cross_faction_trade_allies = yes
	}
	BUL = {
		anti_cross_faction_trade_allies = yes
	}
	FIN = {
		anti_cross_faction_trade_allies = yes
	}
	YUG = {
		anti_cross_faction_trade_allies = yes
	}

	JAP = {
		anti_cross_faction_trade_allies = yes
	}
	MAN = {
		anti_cross_faction_trade_allies = yes
	}
	SIA = {
		anti_cross_faction_trade_allies = yes
	}
}

pow_before_annex = {
	hidden_effect = {
		set_variable = { getting_annexed = 1 }
		every_enemy_country = {
			limit = {
				is_playable_country = yes 
				OR = {
					NOT = {
						original_tag = FRA
					}
					has_global_flag = fall_of_france
				}
				OR = {
					NOT = {
						original_tag = HOL
					}
					has_global_flag = fall_of_france
				}
			}
			calculate_click_effect = yes
		}
	}
}
calculate_click_effect = { #prevent spam hidden idea for one day
	clear_variable = ROOT.pow_total
	every_enemy_country = {
		limit = {
			is_playable_country = yes
			OR = {
				NOT = {
					original_tag = FRA
				}
				has_global_flag = fall_of_france
			}
			OR = {
				NOT = {
					original_tag = HOL
				}
				has_global_flag = fall_of_france
			}
		}

		set_temp_variable = { casualty1 = 0 }

		while_loop_effect = {
			limit = {
				casualties_inflicted_by = {
					opponent = PREV
					thousands > casualty1
				}
			}
			add_to_temp_variable = { casualty1 = 1000 }
		}
		if = {
			limit = {
				casualties_inflicted_by = {
					opponent = PREV
					thousands < casualty1
				}
			}
			add_to_temp_variable  = { casualty1 = -1000 }
		}
		while_loop_effect = {
			limit = {
				casualties_inflicted_by = {
					opponent = PREV
					thousands > casualty1
				}
			}
			add_to_temp_variable = { casualty1 = 100 }
		}
		if = {
			limit = {
				casualties_inflicted_by = {
					opponent = PREV
					thousands < casualty1
				}
			}
			add_to_temp_variable  = { casualty1 = -100 }
		}
		while_loop_effect = {
			limit = {
				casualties_inflicted_by = {
					opponent = PREV
					thousands > casualty1
				}
			}
			add_to_temp_variable = { casualty1 = 10 }
		}
		if = {
			limit = {
				casualties_inflicted_by = {
					opponent = PREV
					thousands < casualty1
				}
			}
			add_to_temp_variable  = { casualty1 = -10 }
		}
		while_loop_effect = {
			limit = {
				casualties_inflicted_by = {
					opponent = PREV
					thousands > casualty1
				}
			}
			add_to_temp_variable = { casualty1 = 1 }
		}

		multiply_temp_variable = { casualty1 = 0.25 }
		if = {
			limit = {
				check_variable = { getting_annexed = 1 }
			}
			add_to_variable= { PREV.pow_other_sources = casualty1 }
		}
		else = {
			add_to_variable = { ROOT.pow_total = casualty1 }
		}
	}

	add_to_variable = { ROOT.pow_total = pow_other_sources  } 
	set_variable = { ROOT.pow_unassigned = ROOT.pow_total }
	subtract_from_variable = { ROOT.pow_unassigned = ROOT.pow_assinged_total }
}
# ENG_narvik_crisis_cat = {
# 	ENG_narvik_crisis = {
# 		icon = generic_operation
# 		available = {
# 			OR = {
# 				GER = {
# 					has_war_with = NOR
# 				}
# 				NOR = {
# 					any_core_state = {
# 						controller  = { original_tag = GER }
# 					}
# 				}
# 			}

# 			SWE = { 
# 				NOT = { has_war_with = ROOT }
# 				NOT = { has_war_with = NOR }
# 				NOT = { has_war_with = GER }
# 				exists = yes
# 				is_subject = no
# 			}

# 			NOR = {
# 				OR = {
# 					is_in_faction_with = ROOT
# 					has_capitulated = yes
# 					exists = no
# 				}
# 			}

# 			OR = {
# 				144 = { is_controlled_by = ROOT }
# 				any_allied_country = {
# 					controls_state = 144
# 				}
# 			}

			
# 			divisions_in_state = {
# 				state = 144
# 				size > 3 
# 			}
# 		}

# 		complete_effect = {
# 			SWE = {
# 				add_opinion_modifier = {
# 					target = PREV
# 					modifier = SWE_ENG_invaded_swe
# 				}
# 				add_opinion_modifier = {
# 					target = PREV
# 					modifier = SWE_ENG_invaded_swe_opinion
# 				}
# 			}
# 			declare_war_on = {
# 				target = SWE
# 				type = liberate_wargoal
# 			}
# 			144 = {
# 				controller = {
# 					if = {
# 						limit = {
# 							controller = { is_in_faction_with = ROOT } #needs to be here otherwise it throws errors
# 						}

# 						declare_war_on = {
# 							target = SWE
# 							type = liberate_wargoal
# 						}

# 						if = {
# 							limit = { controller = { NOT = { has_war_with = SWE }}}
# 							ROOT = { set_variable = { ENG_narvik_controller = PREV } }
# 						}
# 					}
# 				}
# 			}
# 			GER = { country_event = { id = AAT_britain_narvik.2 hours = 1} }
# 			SWE = { country_event = { id = AAT_britain_narvik.2 hours = 1 } }
# 			activate_mission = ENG_explode_the_swedish_iron_ore_mine
# 			hidden_effect = {
# 				set_country_flag = ENG_activated_plan_rfour
# 			}
# 		}

# 		ai_will_do = {
# 			base = 0
# 			modifier = {
# 				is_historical_focus_on = no
# 				OR = {
# 					has_completed_focus = ENG_no_further_appeasement
# 					has_completed_focus = uk_scandinavian_focus
# 				}

# 				NOR = { is_ai = yes }
# 				add = 1
# 			}
# 		}
# 	}

# 	ENG_narvik_crisis_blow_up_mines = {
# 		icon = generic_operation
# 		available = {
# 			OR = {
# 				controls_province = 3095
# 				any_allied_country = {
# 					controls_province = 3095
# 				}
# 			}
# 			OR = {
# 				controls_province = 11155
# 				any_allied_country = {
# 					controls_province = 11155
# 				}
# 			}
# 			OR = {
# 				has_active_mission = ENG_explode_the_swedish_iron_ore_mine
# 				has_war_with = SWE
# 			}
# 		}

# 		visible = {
# 			NOT = {
# 				666 = { 
# 					has_dynamic_modifier = {
# 						modifier = SWE_blown_up_mines
# 					}
# 				}
# 			}
# 		}
# 		cancel_trigger = {
# 			NOT = {
# 				controls_province = 3095
# 				controls_province = 11155
# 				OR = {
# 					has_active_mission = ENG_explode_the_swedish_iron_ore_mine 
# 					has_war_with = SWE
# 				}
# 			}

# 		}
# 		days_remove = 12
# 		complete_effect = {
# 			add_days_mission_timeout = {
# 				mission = ENG_explode_the_swedish_iron_ore_mine
# 				days = 13
# 			}
# 		}
# 		remove_effect = {
# 			666 = {
# 				add_dynamic_modifier = {
# 					modifier = SWE_blown_up_mines
# 				}
# 			}
# 			if = {
# 				limit = {
# 					has_country_flag = ENG_activated_plan_rfour
# 				}
# 				country_event = { id = AAT_britain_narvik.1 }
# 				SWE = {
# 					country_event = { id = AAT_britain_narvik.3 }
# 				}
# 				GER = {
# 					country_event = { id = AAT_britain_narvik.3 }
# 				}

# 				hidden_effect = {
# 					clr_country_flag = ENG_activated_plan_rfour
# 				}
# 			}
# 		}

# 		ai_will_do = {
# 			base = 100
# 		}
# 	}

# 	ENG_explode_the_swedish_iron_ore_mine = { # warning for Canada

# 		icon = eng_support_imperialist_coup
		
# 		available = {
# 			has_dynamic_modifier = {
# 				modifier = SWE_blown_up_mines
# 			}
# 		}
# 		activation = {
# 			always = no
# 		}
# 		days_mission_timeout = 60
# 		fire_only_once = yes

# 		visible = {
# 			always = yes
# 		}

# 		cancel_if_not_visible = no

# 		is_good = no

# 		complete_effect = {
			
# 		}

# 		timeout_effect = {
# 			white_peace = {
# 				tag = SWE
# 			}
# 			add_war_support = -0.1
# 			add_stability = -0.1
# 			custom_effect_tooltip = ENG_explode_the_swedish_iron_ore_mine_tt
# 		}
# 	}
# }

ENG_imperial_conference_decision = {
	
	ENG_imperial_conference_decision = {

		icon = generic_political_discourse
		
		available = {
			hidden_trigger = { always = no }
		}

		days_mission_timeout = 60

		fire_only_once = yes

		activation = {
			tag = ENG
			has_country_flag = ENG_imperial_conference_timer_flag
		}

		visible = {
			tag = ENG
			has_country_flag = ENG_imperial_conference_timer_flag
		}

		cancel_if_not_visible = no

		is_good = yes

		complete_effect = {
			
		}

		timeout_effect = {
			custom_effect_tooltip = imperial_conference_ends_tt
			every_country = {
				limit = {
					OR = {
						AND = {
							is_subject_of = ENG
							tag = CAN
						}
						AND = {
							is_subject_of = ENG
							tag = SAF
						}
						AND = {
							is_subject_of = ENG
							tag = RAJ
						}
						AND = {
							is_subject_of = ENG
							tag = AST
						}
						AND = {
							is_subject_of = ENG
							tag = NZL
						}
					}
				}
				remove_opinion_modifier = { target = ENG modifier = ENG_imperial_conference_opinion }
				remove_opinion_modifier = { target = ENG modifier = ENG_imperial_conference_approved_resolution }
			}
		}
	}
	
	ENG_discuss_appeasement = {

		icon = eng_trade_unions_support

		allowed = {
			tag = ENG
		}

		available = {
			#NOT = { has_country_flag = ENG_imperial_conference_discussion_in_progress }
			has_war = no
		}

		cost = 50

		fire_only_once = yes

		visible = {
			has_completed_focus = ENG_imperial_conference
			has_country_flag = ENG_imperial_conference_timer_flag
		}

		complete_effect = {
			country_event = { id = mtg_britain.95 hours = 2 }
			#set_country_flag = ENG_imperial_conference_discussion_in_progress
			add_war_support = 0.10
			effect_tooltip = { 
				every_country = {
					limit = {
						OR = {
							AND = {
								is_subject_of = ENG
								tag = CAN
							}
							AND = {
								is_subject_of = ENG
								tag = SAF
							}
							AND = {
								is_subject_of = ENG
								tag = RAJ
							}
							AND = {
								is_subject_of = ENG
								tag = AST
							}
							AND = {
								is_subject_of = ENG
								tag = NZL
							}
						}
					}
					add_political_power = -25
					add_war_support = 0.05
					# add_opinion_modifier = {
					# 	target = ROOT
					# 	modifier = ENG_imperial_conference_approved_resolution
					# }
				}
			}
		}

		ai_will_do = {
			factor = 1000000000000
		}
	}

	ENG_discuss_imperial_defense = {

		icon = eng_trade_unions_support

		allowed = {
			tag = ENG
		}

		available = {
			#NOT = { has_country_flag = ENG_imperial_conference_discussion_in_progress }
		}

		cost = 50

		fire_only_once = yes

		visible = {
			has_completed_focus = ENG_imperial_conference
			has_country_flag = ENG_imperial_conference_timer_flag
		}

		complete_effect = {
			country_event = { id = mtg_britain.83 hours = 2 }
			add_timed_idea = { idea = ENG_imperial_conference_defense_5 days = 365 }
			#set_country_flag = ENG_imperial_conference_discussion_in_progress
			effect_tooltip = {
				every_country = {
					limit = {
						OR = {
							AND = {
								is_subject_of = ENG
								tag = CAN
							}
							AND = {
								is_subject_of = ENG
								tag = SAF
							}
							AND = {
								is_subject_of = ENG
								tag = RAJ
							}
							AND = {
								is_subject_of = ENG
								tag = AST
							}
							AND = {
								is_subject_of = ENG
								tag = NZL
							}
						}
					}
					add_political_power = -25
					add_timed_idea = { idea = ENG_imperial_conference_defense_dominion days = 365 }
					# add_opinion_modifier = {
					# 	target = ROOT
					# 	modifier = ENG_imperial_conference_approved_resolution
					# }
				}
			}
		}

		ai_will_do = {
			factor = 10000000
		}
	}

	# ENG_discuss_imperial_trade = {

	# 	icon = eng_trade_unions_support

	# 	allowed = {
	# 		tag = ENG
	# 	}

	# 	available = {
	# 		NOT = { has_country_flag = ENG_imperial_conference_discussion_in_progress }
	# 	}

	# 	cost = 50

	# 	fire_only_once = yes

	# 	visible = {
	# 		has_completed_focus = ENG_imperial_conference
	# 		has_country_flag = ENG_imperial_conference_timer_flag
	# 	}

	# 	complete_effect = {
	# 		country_event = { id = mtg_britain.87 hours = 6 }
	# 		set_country_flag = ENG_imperial_conference_discussion_in_progress
	# 	}

	# 	ai_will_do = {
	# 		factor = 100
	# 	}
	# }

	ENG_discuss_imperial_economy = {

		icon = eng_trade_unions_support

		allowed = {
			tag = ENG
		}

		available = {
			#NOT = { has_country_flag = ENG_imperial_conference_discussion_in_progress }
		}

		cost = 50

		fire_only_once = yes

		visible = {
			has_completed_focus = ENG_imperial_conference
			has_country_flag = ENG_imperial_conference_timer_flag
		}

		complete_effect = {
			country_event = { id = mtg_britain.91 hours = 2 }
			add_timed_idea = { idea = ENG_imperial_conference_economy_5 days = 365 }
			#set_country_flag = ENG_imperial_conference_discussion_in_progress
			effect_tooltip = {
				every_country = {
					limit = {
						OR = {
							AND = {
								is_subject_of = ENG
								tag = CAN
							}
							AND = {
								is_subject_of = ENG
								tag = SAF
							}
							AND = {
								is_subject_of = ENG
								tag = RAJ
							}
							AND = {
								is_subject_of = ENG
								tag = AST
							}
							AND = {
								is_subject_of = ENG
								tag = NZL
							}
						}
					}
					add_political_power = -25
					add_timed_idea = { idea = ENG_imperial_conference_economy_dominion days = 365 }
					# add_opinion_modifier = {
					# 	target = ROOT
					# 	modifier = ENG_imperial_conference_approved_resolution
					# }
				}
			}
		}

		ai_will_do = {
			factor = 10000000
		}
	}

}

political_actions = {

	# ENG_host_CZE_exile_government = {
	
	# 	icon = generic
	
	# 	allowed = {
	# 		has_dlc = "Man the Guns"
	# 		original_tag = ENG
			
	# 	}
	# 	available = {
	# 		has_government = democratic
	# 	}
	# 	cost = 50
	# 	fire_only_once = yes
	# 	ai_will_do = {
	# 		factor = 1
	# 	}
	
	# 	visible = {
	# 		CZE = {
	# 			exists = no
	# 		}
		
	# 		CZE = {
	# 			is_government_in_exile = no
	# 		}
		
	# 		9 = { CONTROLLER = { has_war_with = ROOT } }
	# 	}
	# 	complete_effect = {
	# 		CZE = {
	# 			become_exiled_in = {
	# 				target = ROOT
	# 				legitimacy = 50
	# 			}
	# 		}
	# 	}
	# }
	
	hold_blood_toil_tears_sweat_speech = {

		icon = generic_political_discourse

		allowed = {
			tag = ENG
		}

		available = {
			has_government = democratic
			has_country_leader = { ruling_only = yes name = "Winston Churchill" }
			has_war_with = GER
		}

		cost = 50

		fire_only_once = yes

		visible = {
			tag = ENG
			has_government = democratic
			has_war_with = GER
			has_country_leader = { ruling_only = yes name = "Winston Churchill" }
		}

		complete_effect = {
			add_stability = 0.05
			add_war_support = 0.05
			if = {
				limit = {
					USA = {
						exists = yes
						has_war = no
						has_government = ROOT
					}
				}
				USA = { set_country_flag = blood_toil_tears_sweat_speech }
			}
			set_country_flag = blood_toil_tears_sweat_speech
		}

		ai_will_do = {
			factor = 200 #Gotta allow the Americans to help
		}
	}

	hold_fight_on_the_beaches_speech = {

		icon = generic_political_discourse

		allowed = {
			tag = ENG
		}

		available = {
			has_government = democratic
			has_country_leader = { ruling_only = yes name = "Winston Churchill" }
			has_war_with = GER
			is_in_faction_with = FRA
			FRA = {
				surrender_progress > 0.2
			}
		}

		cost = 50

		fire_only_once = yes

		visible = {
			tag = ENG
			has_government = democratic
			has_war_with = GER
			has_country_flag = blood_toil_tears_sweat_speech
			has_country_leader = { ruling_only = yes name = "Winston Churchill" }
		}

		complete_effect = {
			add_war_support = 0.05
			if = {
				limit = {
					USA = {
						exists = yes
						has_war = no
						has_government = ROOT
					}
				}
				USA = { set_country_flag = fight_on_the_beaches_speech }
			}
			set_country_flag = fight_on_the_beaches_speech
		}

		ai_will_do = {
			factor = 200 #Gotta allow the Americans to help
		}
	}

	hold_this_was_their_finest_hour_speech = {

		icon = generic_political_discourse

		allowed = {
			tag = ENG
		}

		available = {
			has_government = democratic
			has_country_leader = { ruling_only = yes name = "Winston Churchill" }
			has_war_with = GER
			is_in_faction_with = FRA
			FRA = { has_capitulated = yes }
		}

		cost = 50

		fire_only_once = yes

		visible = {
			tag = ENG
			has_government = democratic
			has_war_with = GER
			has_country_flag = fight_on_the_beaches_speech
			has_country_leader = { ruling_only = yes name = "Winston Churchill" }
		}

		complete_effect = {
			add_war_support = 0.05
			if = {
				limit = {
					USA = {
						exists = yes
						has_war = no
						has_government = ROOT
					}
				}
				USA = { set_country_flag = this_was_their_finest_hour_speech }
			}
			set_country_flag = this_was_their_finest_hour_speech
		}

		ai_will_do = {
			factor = 200 #Gotta allow the Americans to help
		}
	}

	macdonald_proposal = {
	
		allowed = {
			tag = ENG
		}
		
		available = {
			tag = ENG
			has_government = democratic
			has_war_with = GER
			IRE = { exists = yes }
			NOT = { is_in_faction_with = IRE }
			FRA = { has_capitulated = yes }
			is_in_faction_with = FRA
		}

		cost = 50
		
		fire_only_once = yes
		visible = {
			tag = ENG
			has_government = democratic
			has_war_with = GER
			IRE = { exists = yes }
		}
		
		complete_effect = {
			IRE = { country_event = { id = wtt_britain.24 } }
			add_popularity = { ideology = democratic popularity = 0.03 }
			add_stability = -0.05
		}

		ai_will_do = {
			factor = 1
		}
	}

	ENG_seize_colonies = {

		icon = generic_prepare_civil_war
	
		allowed = {
			tag = ENG
		}
		
		available = {
			has_war = yes
			has_government = democratic
			POR = {
				has_war = yes
				is_in_faction = no
			}
		}

		cost = 0
		
		visible = {
			has_war = yes
			NOT = { has_war_with = POR }
			country_exists = POR
		}
		
		complete_effect = {
			ENG = {
				transfer_state = 796
				transfer_state = 296
				transfer_state = 702
				transfer_state = 705
				transfer_state = 697
				transfer_state = 721
				transfer_state = 729
			}
			SAF = {
				transfer_state = 540
				transfer_state = 891
				transfer_state = 892
				transfer_state = 544
				transfer_state = 896
				transfer_state = 897
			}
			RAJ = {
				transfer_state = 321
			}
			set_country_flag = ENG_seize_col
		}
	}
	
	ENG_invoke_the_alliance_of_1373 = {

		icon = generic_prepare_civil_war
	
		allowed = {
			tag = ENG
		}
		
		available = {
			has_war = yes
			has_government = democratic
			POR = {
				has_war = yes
				is_in_faction = no
			}
			is_faction_leader = yes
			NOT = { has_country_flag = ENG_seize_col }
		}

		cost = 0
		
		visible = {
			has_war = yes
			NOT = { has_war_with = POR }
			country_exists = POR
		}
		
		complete_effect = {
			POR = { 
				country_event = generic.5
				remove_ideas = POR_neutrality_idea
			}
		}
	}

	ENG_request_azores_lease = {
	
		allowed = {
			tag = ENG
		}
		
		available = {
			has_war = yes
			has_government = democratic
			POR = {
				has_full_control_of_state = 698
				OR = {
					has_government = ROOT
					has_government = neutrality
				}
			}
			POR = { is_in_faction = no }
		}

		cost = 50

		fire_only_once = yes

		ai_will_do = {
			factor = 10
		}
		
		visible = {
			has_war = yes
			POR = {
				has_full_control_of_state = 698
				NOT = { has_war_with = ROOT }
			}
		}
		
		complete_effect = {
			POR = { country_event = wtt_britain_lease_azores.1 }
		}
	}

	ENG_abdication_crisis = { # timer for the player to see when the event chain ends

		icon = eng_abdication_crisis
		
		available = {
			has_country_flag = ENG_abdication_crisis_changed_mind
		}

		days_mission_timeout = 200

		fire_only_once = yes

		activation = {
			tag = ENG
			OR = {
				has_country_flag = ENG_abdication_crisis_normal_marriage
				has_country_flag = ENG_abdication_crisis_morganatic_marriage
			}
		}

		visible = {
			tag = ENG
			OR = {
				has_country_flag = ENG_abdication_crisis_normal_marriage
				has_country_flag = ENG_abdication_crisis_morganatic_marriage
			}
			NOT = { has_country_flag = edward_viii_married_wallis_simpson }
		}

		cancel_if_not_visible = yes

		is_good = yes

		complete_effect = {
			
		}

		timeout_effect = {
			country_event = { id = mtg_britain.5 }
		}
	}

	ENG_britain_demands_treaty_compliance = { # ENG demanding scuttling of ships to maintain Washington Naval Treaty

		icon = generic_naval
		
		available = {
			if = {
				limit = {
					original_tag = USA
				}
				custom_trigger_tooltip = {
					tooltip = ENG_britain_demands_treaty_compliance_tt_1
					naval_strength_comparison = {
						other = ENG
						ratio < 1.01
						sub_unit_def_weights = {
							carrier = 1
							battleship = 1
							battle_cruiser = 1
						}
					}
				}
			}
			if = {
				limit = {
					original_tag = JAP
				}
				custom_trigger_tooltip = {
					tooltip = ENG_britain_demands_treaty_compliance_tt_2
					naval_strength_comparison = {
						other = ENG
						ratio < 0.66
						sub_unit_def_weights = {
							carrier = 1
							battleship = 1
							battle_cruiser = 1
						}
					}
				}
			}
			if = {
				limit = {
					NOT = { original_tag = USA }
					NOT = { original_tag = JAP }
				}
				custom_trigger_tooltip = {
					tooltip = ENG_britain_demands_treaty_compliance_tt_3
					naval_strength_comparison = {
						other = ENG
						ratio < 0.36
						sub_unit_def_weights = {
							carrier = 1
							battleship = 1
							battle_cruiser = 1
						}
					}
				}
			}
		}

		days_mission_timeout = 60

		fire_only_once = no

		activation = {
			has_country_flag = ENG_demanding_ship_reduction_flag
		}

		visible = {
			has_country_flag = ENG_demanding_ship_reduction_flag
		}

		cancel_if_not_visible = yes

		is_good = no

		complete_effect = {
			clr_country_flag = ENG_demanding_ship_reduction_flag
			random_country = {
				limit = {
					original_tag = ENG
				}
				country_event = { id = mtg_britain.107 }
			}
		}

		timeout_effect = {
			clr_country_flag = ENG_demanding_ship_reduction_flag
			random_country = {
				limit = {
					original_tag = ENG
				}
				country_event = { id = mtg_britain.108 }
			}
			effect_tooltip = {
				ENG = {
					create_wargoal = {
						target = ROOT
						type = puppet_wargoal_focus
						expire = 0
					}
				}
			}
		}
	}

}

# Home Defense
ENG_homeland_defense_decision_cat = {
	
	# Enforce Blackouts
	ENG_enforce_blackouts = {

		icon = GFX_decision_eng_propaganda_campaigns

		priority = 100

		visible = {
			NOT = {
				has_idea = ENG_blackouts_idea
			}
		}

		available = {
			has_war = yes
			NOT = {
				has_idea = ENG_blackouts_idea
			}
		}
	
		cost = 50

		days_remove = 14

		remove_effect = {
			add_ideas = ENG_blackouts_idea
			custom_effect_tooltip = ENG_enforce_blackouts_tt
		}
		
		ai_will_do = {
			base = 50
			modifier = {
				factor = 2
				has_war_with = GER
			}
			modifier = {
				factor = 5
				has_war_with = GER
				FRA = {
					has_capitulated = yes
				}
			}
		}
	}

	# End the Blackouts
	ENG_end_the_blackouts = {

		icon = GFX_decision_eng_propaganda_campaigns

		priority = 99

		visible = {
			has_idea = ENG_blackouts_idea
		}

		available = {
			has_idea = ENG_blackouts_idea
		}
	
		cost = 50

		days_remove = 14

		remove_effect = {
			remove_ideas = {
				ENG_blackouts_idea
			}	
		}
		
		ai_will_do = {
			base = 10
			modifier = {
				factor = 0
				has_war_with = GER
			}
			modifier = {
				factor = 100
				has_war = no
			}
		}
	}

	# Enforce Blackouts
	ENG_promote_the_blitz_spirit = {

		icon = GFX_decision_eng_install_government

		priority = 95

		visible = {
			has_war_with = GER
			NOT = {
				has_idea = ENG_blitz_spirit_idea
			}
		}

		available = {
			has_war = yes
			has_completed_focus = ENG_general_rearmament
		}
	
		cost = 50

		days_remove = 35

		remove_effect = {
			swap_ideas = {
				remove_idea = british_austerity_idea
				add_idea = ENG_blitz_spirit_idea
			}	
		}
		
		ai_will_do = {
			base = 50
			modifier = {
				factor = 2
				has_war_with = GER
			}
			modifier = {
				factor = 5
				has_war_with = GER
				FRA = {
					has_capitulated = yes
				}
			}
		}
	}

	# The Homeland Defense Act
	ENG_the_homeland_defense_act = {

		icon = GFX_decision_eng_trade_unions_support

		priority = 98

		visible = {
			has_war = yes
		}

		available = {
			has_war = yes
			any_owned_state = {
				is_core_of = ROOT
				#is_in_home_area = yes 	
				NOT = {
					is_controlled_by = ROOT
				}
			}
		}

		fire_only_once = yes
	
		cost = 15

		complete_effect = {
			add_timed_idea = {
				idea = ENG_desperate_defense_of_the_homeland
				days = 180
			}	
		}
		
		ai_will_do = {
			base = 150
			modifier = {
				factor = 2
				has_war_with = GER
			}
			modifier = {
				factor = 5
				has_war_with = GER
				FRA = {
					has_capitulated = yes
				}
			}
		}
	}

	# Establish the Local Defence Volunteers
	ENG_establish_the_local_defense_volunteers = {

		icon = GFX_decision_eng_blackshirt_march

		priority = 97

		available = {
			has_war = yes
		}

		fire_only_once = yes
	
		cost = 25

		days_remove = 70

		remove_effect = {
			add_war_support = 0.03
			custom_effect_tooltip = ENG_establish_the_local_defense_volunteers_tt
			hidden_effect = {
				set_country_flag = ENG_home_guard_established_flag
				delete_unit_template_and_units = {
					division_template = "Home Guard Defense Brigades"
					disband = yes #if yes, will refund equipment/manpower.
				}

				division_template = {
					name = "Home Guard Defense Brigades"
					division_names_group = ENG_INF_01
					template_counter = 99
					role = garrison
					is_locked = yes
					regiments = {
						infantry = { x = 0 y = 0 }
						infantry = { x = 0 y = 1 }
						infantry = { x = 0 y = 2 }
						infantry = { x = 1 y = 0 }
						infantry = { x = 1 y = 1 }
					}
					support = {
					}
				}
			}
		}
		
		ai_will_do = {
			base = 50
			modifier = {
				factor = 2
				has_war_with = GER
			}
			modifier = {
				factor = 5
				has_war_with = GER
				FRA = {
					has_capitulated = yes
				}
			}
		}
	}

	# Utilize the Home Guard in the Factories
	ENG_utilize_home_guard_in_factories = {

		icon = GFX_decision_generic_industry

		priority = 96

		visible = {
			has_country_flag = ENG_home_guard_established_flag
		}

		available = {
			has_war = yes
		}

		fire_only_once = yes
	
		cost = 50

		days_remove = 70

		days_re_enable = 184

		remove_effect = {
			add_timed_idea = {
				idea = ENG_home_guard_assistance_in_factories
				days = 180
			}	
			custom_effect_tooltip = ENG_utilize_home_guard_in_factories_tt
		}
		
		ai_will_do = {
			base = 20
			modifier = {
				factor = 2
				has_war_with = GER
			}
			modifier = {
				factor = 3
				has_war_with = GER
				FRA = {
					has_capitulated = yes
				}
			}
		}
	}

	# Raise the Home Guard in [FROM.GetName]
	ENG_raise_the_home_guard_in_state = {

		icon = GFX_decision_generic_protection

		allowed = {
			original_tag = ENG
		} 

		priority = 80

		visible = {
			is_subject = no
			has_civil_war = no
			has_country_flag = ENG_home_guard_established_flag
		}

		available = {
			has_war = yes
			any_owned_state = {
				is_core_of = ROOT
				#is_in_home_area = yes 	
				NOT = {
					is_controlled_by = ROOT
				}
			}
			NOT = {
				has_country_flag = ENG_raising_militia_flag
			}
		}

		state_target = yes

		on_map_mode = map_and_decisions_view

		target_array = ROOT.core_states

		target_trigger = {
			FROM = {
				OR = {
					state = 126
					state = 128
					state = 130
					state = 132
					state = 121
					state = 133
				}
				NOT = {
					has_state_flag = {
						flag = ENG_raised_home_guard_here_already_flag
					}	
				}
				is_controlled_by = ROOT
			}			
		}
		
		cost = 25

		fire_only_once = yes

		days_remove = 7

		ai_will_do = {
			base = 50
			modifier = {
				factor = 2
				has_war_with = GER
			}
			modifier = {
				factor = 5
				has_war_with = GER
				FRA = {
					has_capitulated = yes
				}
			}
		}

		cancel_trigger = {
			has_civil_war = yes
			NOT = {
				FROM = { is_controlled_by = ROOT } 
			}
		}

		cancel_effect = {
			clr_country_flag = ENG_raising_militia_flag
		}

		complete_effect = {
			set_country_flag = ENG_raising_militia_flag
		}

		remove_effect = {

			FROM = {
				set_state_flag = ENG_raised_home_guard_here_already_flag
				create_unit = {
				    division = "name = \"Home Guard Defense Brigade\" division_template = \"Home Guard Defense Brigades\" start_experience_factor = 0.1 start_equipment_factor = 0.6"
				    owner = ROOT
				}
				create_unit = {
				    division = "name = \"Home Guard Defense Brigade\" division_template = \"Home Guard Defense Brigades\" start_experience_factor = 0.1 start_equipment_factor = 0.6"
				    owner = ROOT
				}
			}

			clr_country_flag = ENG_raising_militia_flag
		}
	}

	# Send the Hoem Guards back Home
	ENG_send_the_home_guard_back_home = {

		icon = GFX_decision_SWI_dismiss_council

		priority = 81

		visible = {
			has_country_flag = ENG_home_guard_established_flag
		}

		available = {
			has_war = no
		}

		fire_only_once = yes
	
		cost = 10

		complete_effect = {

			custom_effect_tooltip = ENG_disband_home_guards_tt

			hidden_effect = {
				delete_units = {
					division_template = "Home Guard Defense Brigades"
					disband = no #MP or weapons are not ours to take
				}
			}

		}
		
		ai_will_do = {
			base = 500
		}
	}

}

operations = {

	operation_fork = {

		icon = generic_operation
	
		allowed = {
			tag = ENG
		}
		
		available = {
			tag = ENG
			has_government = democratic
			has_war_with = GER
			ICE = { exists = yes }
		}

		cost = 50

		fire_only_once = yes

		ai_will_do = {
			factor = 1
		}
		
		visible = {
			tag = ENG
			has_war_with = GER
			ICE = { exists = yes }
			NOT = { ICE = { is_in_faction_with = ROOT } }
		}
		
		complete_effect = {
			annex_country = { target = ICE }
			ENG = {
				transfer_state = 337
			}
			100 = { set_compliance = 80 }
			337 = { set_compliance = 80 }
		}
	}

	ENG_annex_ire = {

		allowed = {
			original_tag = ENG
		}

		available = {
			FRA = { has_capitulated = yes }
			IRE = {is_ai = yes}
		}

		ai_will_do = {
			factor = 0
		}

		visible = {
			always = yes
		}
		fire_only_once = yes
		complete_effect = {
			annex_country = { target = IRE transfer_troops = yes }
			113 = { set_compliance = 60 }
			134 = { set_compliance = 60 }
			135 = { set_compliance = 60 }
			ENG = {
				if = { 
					limit = {
						has_game_rule = {
							rule = allow_voice_lines
							option = ENABLED
						}
					}
				scoped_sound_effect = "wot_ze_fok"
				}
			}
		}
	}

	ENG_annex_saf = {

		allowed = {
			original_tag = ENG
		}

		available = {
			FRA = { has_capitulated = yes }
			SAF = {is_ai = yes}
		}

		ai_will_do = {
			factor = 0
		}

		visible = {
			always = yes
		}
		fire_only_once = yes
		complete_effect = {
			annex_country = { target = SAF transfer_troops = yes }
			275 = { set_compliance = 60 }
			541 = { set_compliance = 60 }
			681 = { set_compliance = 60 }
			719 = { set_compliance = 60 }

		}
	}
	
	invade_ireland = {

		icon = generic_operation
	
		allowed = {
			tag = ENG
		}
		
		available = {
			tag = ENG
			has_government = democratic
			has_war_with = GER
			IRE = { exists = yes }
			NOT = { is_in_faction_with = IRE }
			NOR = { has_capitulated = yes }
			is_in_faction_with = NOR
			FRA = { has_capitulated = yes }
			is_in_faction_with = FRA
		}

		cost = 50
		
		fire_only_once = yes

		ai_will_do = {
			factor = 0
			modifier = {
				add = 100
				any_enemy_country = {
					has_attache_from = IRE
				}
			}
			modifier = {
				add = 1
				has_opinion = { target = IRE value < -50 }
			}
			modifier = {
				add = 1
				IRE = { has_added_tension_amount > 0.05 }
			}
		}
		
		visible = {
			tag = ENG
			has_war_with = GER
			IRE = { exists = yes }
			always = no
		}
		
		complete_effect = {
			add_state_claim = 113
			add_state_claim = 134
			add_state_claim = 135
			declare_war_on = { target = IRE type = annex_everything }
			add_popularity = { ideology = democratic popularity = -0.03 }
		}
	}

	mers_el_kebir_raid = {

		icon = generic_naval
	
		allowed = {
			tag = ENG
		}
		
		available = {
			has_country_leader = { ruling_only = yes name = "Winston Churchill" }
			has_government = democratic
			has_war_with = GER
			any_country = {
				original_tag = FRA
				has_government = fascism
			}
		}

		cost = 100

		fire_only_once = yes

		ai_will_do = {
			factor = 1
		}
		
		visible = {
			has_country_leader = { ruling_only = yes name = "Winston Churchill" }
			tag = ENG
			has_government = democratic
			has_war_with = GER
			OR = {
				AND = {
					is_in_faction_with = FRA
					FRA = { surrender_progress > 0.2 }
				}
				any_country = {
					original_tag = FRA
					has_government = fascism
				}
			}
		}
		
		complete_effect = {
			random_other_country = {
				limit = {
					original_tag = FRA
					has_government = fascism
				}
				country_event = { id = wtt_britain.25 hours = 5 }
			}
		}
	}
	
	

}

special_projects = {

	ENG_rifle_purchases = {
		icon = generic_prepare_civil_war
		available = {
		
			NOT = { has_country_flag = ENG_buying_equipment_flag }
		}
		visible = {
			has_completed_focus = ENG_arms_purchases
		}
		
		days_remove = 90
		cost = 100
		complete_effect = {
			USA = {
				add_offsite_building = { type = industrial_complex level = 8 }
			}
			set_country_flag = { flag = ENG_buying_equipment_flag value = 1 days = 90 }
		}
		
		modifier = {
			civilian_factory_use = 8
		}

		days_re_enable = 90
		
		remove_effect = {
			add_equipment_to_stockpile = {
				type = infantry_equipment
				amount = 5000
				
			}
			add_equipment_to_stockpile = {
				type = squad_equipment
				amount = 1000
				
			}
			USA = {
				add_offsite_building = { type = industrial_complex level = -8 }
			}
		}
	}

	ENG_arty_purchases = {
		icon = generic_prepare_civil_war
		available = {
		
			NOT = { has_country_flag = ENG_buying_equipment_flag }
		}
		visible = {
			has_completed_focus = ENG_arms_purchases
		}
		
		days_remove = 90
		cost = 100
		complete_effect = {
			USA = {
				add_offsite_building = { type = industrial_complex level = 8 }
			}
			set_country_flag = { flag = ENG_buying_equipment_flag value = 1 days = 90 }
		}
		
		modifier = {
			civilian_factory_use = 8
		}
		
		days_re_enable = 90
		
		remove_effect = {
			add_equipment_to_stockpile = {
				type = artillery_equipment
				amount = 360
				
			}
			add_equipment_to_stockpile = {
				type = anti_tank_equipment
				amount = 360
				
			}
			USA = {
				add_offsite_building = { type = industrial_complex level = -8 }
			}
		}
	}

	ENG_truck_purchases = {
		icon = generic_prepare_civil_war
		available = {
		
			NOT = { has_country_flag = ENG_buying_equipment_flag }
		}
		visible = {
			has_completed_focus = ENG_arms_purchases
		}
		
		days_remove = 90
		cost = 100
		complete_effect = {
			USA = {
				add_offsite_building = { type = industrial_complex level = 8 }
			}
			set_country_flag = { flag = ENG_buying_equipment_flag value = 1 days = 90 }
		}
		
		modifier = {
			civilian_factory_use = 10
		}
		
		days_re_enable = 90
		
		remove_effect = {
			add_equipment_to_stockpile = {
				type = motorized_equipment
				amount = 1200
				
			}
			
			USA = {
				add_offsite_building = { type = industrial_complex level = -8 }
			}
		}
	}

	ENG_support_purchases = {
		icon = generic_prepare_civil_war
		available = {
		
			NOT = { has_country_flag = ENG_buying_equipment_flag }
		}
		visible = {
			has_completed_focus = ENG_arms_purchases
		}
		
		days_remove = 90
		cost = 100
		complete_effect = {
			USA = {
				add_offsite_building = { type = industrial_complex level = 8 }
			}
			set_country_flag = { flag = ENG_buying_equipment_flag value = 1 days = 90 }
		}
		
		modifier = {
			civilian_factory_use = 8
		}

		days_re_enable = 90
		
		remove_effect = {
			add_equipment_to_stockpile = {
				type = support_equipment
				amount = 500
				
			}
			add_equipment_to_stockpile = {
				type = sf_equipment
				amount = 800
			}
			add_equipment_to_stockpile = {
				type = radio_equipment_0
				amount = 250
			}
			
			USA = {
				add_offsite_building = { type = industrial_complex level = -8 }
			}
		}
	}

}

ENG_enforce_the_naval_treaties = {

	ENG_demand_treaty_compliance = {

		icon = eng_trade_unions_demand

		allowed = {
			tag = ENG
		}

		available = {
			has_navy_size = {
			    size > 14
				archetype = ship_hull_heavy
			}
			if = {
				limit = {
					FROM = {
						original_tag = USA
					}
				}
				FROM = {
					custom_trigger_tooltip = {
						tooltip = ENG_demand_treaty_compliance_tt2
						naval_strength_comparison = {
							other = ENG
							ratio > 1
							sub_unit_def_weights = {
								carrier = 1
								battleship = 1
								battle_cruiser = 1
							}
						}
					}
					NOT = { is_in_faction_with = ROOT }
					NOT = { has_war_with = ROOT }
				}
			}
			if = {
				limit = {
					FROM = {
						original_tag = JAP
					}
				}
				FROM = {
					custom_trigger_tooltip = {
						tooltip = ENG_demand_treaty_compliance_tt3
						naval_strength_comparison = {
							other = ENG
							ratio > 0.65
							sub_unit_def_weights = {
								carrier = 1
								battleship = 1
								battle_cruiser = 1
							}
						}
					}
					NOT = { is_in_faction_with = ROOT }
					NOT = { has_war_with = ROOT }
				}
			}
			if = {
				limit = {
					FROM = {
						NOT = { original_tag = USA }
						NOT = { original_tag = JAP }
					}
				}
				FROM = {
					custom_trigger_tooltip = {
						tooltip = ENG_demand_treaty_compliance_tt4
						naval_strength_comparison = {
							other = ENG
							ratio > 0.35
							sub_unit_def_weights = {
								carrier = 1
								battleship = 1
								battle_cruiser = 1
							}
						}
					}
					NOT = { is_in_faction_with = ROOT }
					NOT = { has_war_with = ROOT }
				}
			}
		}

		target_trigger = {
			FROM = {
				OR = {
					AND = {
						original_tag = USA
						naval_strength_comparison = {
							other = ENG
							ratio > 0.8
							sub_unit_def_weights = {
								carrier = 1
								battleship = 1
								battle_cruiser = 1
							}
						}
						NOT = { is_in_faction_with = ROOT }
						NOT = { has_war_with = ROOT }
					}
					AND = {
						original_tag = JAP
						naval_strength_comparison = {
							other = ENG
							ratio > 0.5
							sub_unit_def_weights = {
								carrier = 1
								battleship = 1
								battle_cruiser = 1
							}
						}
						NOT = { is_in_faction_with = ROOT }
						NOT = { has_war_with = ROOT }
					}
					AND = {
						NOT = { original_tag = USA }
						NOT = { original_tag = JAP }
						naval_strength_comparison = {
							other = ENG
							ratio > 0.2
							sub_unit_def_weights = {
								carrier = 1
								battleship = 1
								battle_cruiser = 1
							}
						}
						NOT = { is_in_faction_with = ROOT }
						NOT = { has_war_with = ROOT }
					}
				}
			}
		}

		cost = 50

		fire_only_once = no

		ai_will_do = {
			factor = 10
		}

		visible = {
			original_tag = ENG
			always = no
			FROM = {
				OR = {
					AND = {
						original_tag = USA
						naval_strength_comparison = {
							other = ENG
							ratio > 0.8
							sub_unit_def_weights = {
								carrier = 1
								battleship = 1
								battle_cruiser = 1
							}
						}
						NOT = { is_in_faction_with = ROOT }
						NOT = { has_war_with = ROOT }
					}
					AND = {
						original_tag = JAP
						naval_strength_comparison = {
							other = ENG
							ratio > 0.5
							sub_unit_def_weights = {
								carrier = 1
								battleship = 1
								battle_cruiser = 1
							}
						}
						NOT = { is_in_faction_with = ROOT }
						NOT = { has_war_with = ROOT }
					}
					AND = {
						NOT = { original_tag = USA }
						NOT = { original_tag = JAP }
						naval_strength_comparison = {
							other = ENG
							ratio > 0.2
							sub_unit_def_weights = {
								carrier = 1
								battleship = 1
								battle_cruiser = 1
							}
						}
						NOT = { is_in_faction_with = ROOT }
						NOT = { has_war_with = ROOT }
					}
				}
			}
		}

		complete_effect = {
			FROM = {
				set_country_flag = ENG_demanding_ship_reduction_flag
				activate_mission = ENG_britain_demands_treaty_compliance
				country_event = { id = mtg_britain.106 hours = 6 }
				custom_effect_tooltip = ENG_demand_treaty_compliance_tt
			}
		}

	}

}

ENG_develop_the_empire = {

	ENG_develop_ast = {
		
		icon = generic_construction

		allowed = {
			original_tag = ENG
		}

		available = {
			AST = {
				OR = {
					is_in_faction_with = ENG
					is_subject_of = ENG
				}
			}
			has_completed_focus = ENG_develop_the_empire
		}

		visible = {
			has_completed_focus = ENG_develop_the_empire
		}

		fire_only_once = yes

		days_remove = 120

		modifier = {
			civilian_factory_use = 5
		}

		ai_will_do = {
			factor = 1
		}
		remove_effect = {
			AST = {
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = industrial_complex
							size > 1
							include_locked = yes
						}
						is_controlled_by = AST
						is_core_of = AST
					}
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = industrial_complex
							size > 1
							include_locked = yes
						}
						is_controlled_by = AST
						is_core_of = AST
					}
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
				add_autonomy_ratio = {
					value = -0.05
					localization = uk_australia_focus
				}
			}
		}
	}
	
	ENG_develop_nzl = {
		
		icon = generic_construction

		allowed = {
			original_tag = ENG
		}

		available = {
			NZL = {
				OR = {
					is_in_faction_with = ENG
					is_subject_of = ENG
				}
			}
			has_completed_focus = ENG_develop_the_empire
		}

		visible = {
			has_completed_focus = ENG_develop_the_empire
		}

		fire_only_once = yes

		days_remove = 120

		modifier = {
			civilian_factory_use = 5
		}

		ai_will_do = {
			factor = 1
		}
		remove_effect = { 
			NZL = {
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = industrial_complex
							size > 1
							include_locked = yes
						}
						is_controlled_by = NZL
						is_core_of = NZL
					}
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = industrial_complex
							size > 1
							include_locked = yes
						}
						is_controlled_by = NZL
						is_core_of = NZL
					}
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
				add_autonomy_ratio = {
					value = -0.05
					localization = uk_new_zealand_focus
				}
			}
		}
	}
	
	ENG_develop_can = {
		
		icon = generic_construction

		allowed = {
			original_tag = ENG
		}

		available = {
			CAN = {
				OR = {
					is_in_faction_with = ENG
					is_subject_of = ENG
				}
			}
			has_completed_focus = ENG_develop_the_empire
		}

		visible = {
			has_completed_focus = ENG_develop_the_empire
		}

		fire_only_once = yes

		days_remove = 120

		modifier = {
			civilian_factory_use = 5
		}

		ai_will_do = {
			factor = 1
		}
		remove_effect = { 
			CAN = {
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = industrial_complex
							size > 1
							include_locked = yes
						}
						is_controlled_by = CAN
						is_core_of = CAN
					}
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = industrial_complex
							size > 1
							include_locked = yes
						}
						is_controlled_by = CAN
						is_core_of = CAN
					}
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
				add_autonomy_ratio = {
					value = -0.05
					localization = uk_canada_focus
				}
			}
		}
	}
	
	ENG_develop_saf = {
		
		icon = generic_construction

		allowed = {
			original_tag = ENG
		}

		available = {
			SAF = {
				OR = {
					is_in_faction_with = ENG
					is_subject_of = ENG
				}
			}
			has_completed_focus = ENG_develop_the_empire
		}

		visible = {
			has_completed_focus = ENG_develop_the_empire
		}

		fire_only_once = yes

		days_remove = 120

		modifier = {
			civilian_factory_use = 5
		}

		ai_will_do = {
			factor = 1
		}
		remove_effect = { 
			SAF = {
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = industrial_complex
							size > 1
							include_locked = yes
						}
						is_controlled_by = SAF
						is_core_of = SAF
					}
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = industrial_complex
							size > 1
							include_locked = yes
						}
						is_controlled_by = SAF
						is_core_of = SAF
					}
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
				add_autonomy_ratio = {
					value = -0.05
					localization = uk_south_africa_focus
				}
			}
		}
	}
	
	ENG_develop_raj = {
		
		icon = generic_construction

		allowed = {
			original_tag = ENG
		}

		available = {
			RAJ = {
				OR = {
					is_in_faction_with = ENG
					is_subject_of = ENG
				}
			}
			has_completed_focus = ENG_develop_the_empire
		}

		visible = {
			has_completed_focus = ENG_develop_the_empire
		}

		fire_only_once = yes

		days_remove = 120

		modifier = {
			civilian_factory_use = 8
		}

		ai_will_do = {
			factor = 1
		}
		remove_effect = { 
			RAJ = {
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = industrial_complex
							size > 3
							include_locked = yes
						}
						is_controlled_by = RAJ
						is_core_of = RAJ
					}
					add_extra_state_shared_building_slots = 4
					add_building_construction = {
						type = industrial_complex
						level = 4
						instant_build = yes
					}
				}
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = industrial_complex
							size > 3
							include_locked = yes
						}
						is_controlled_by = RAJ
						is_core_of = RAJ
					}
					add_extra_state_shared_building_slots = 4
					add_building_construction = {
						type = industrial_complex
						level = 4
						instant_build = yes
					}
				}
				add_autonomy_ratio = {
					value = -0.05
					localization = uk_india_focus
				}
			}
		}
	}

}

ENG_persian_corridor = {

	ENG_lease_guns = {
		icon = generic_prepare_civil_war
		allowed = {
			original_tag = ENG
		}
		available = {
			656 = {
				CONTROLLER = {
					OR = {
						tag = ENG
						is_subject_of = ENG
					}
				}
			}
			291 = {
				CONTROLLER = {
					OR = {
						tag = ENG
						is_subject_of = ENG
					}
				}
			}
			413 = {
				CONTROLLER = {
					OR = {
						tag = ENG
						is_subject_of = ENG
					}
				}
			}
			412 = {
				CONTROLLER = {
					OR = {
						tag = ENG
						is_subject_of = ENG
					}
				}
			}
			420 = {
				CONTROLLER = {
					OR = {
						tag = SOV
						is_subject_of = SOV
					}
				}
			}
			419 = {
				CONTROLLER = {
					OR = {
						tag = SOV
						is_subject_of = SOV
					}
				}
			}
			229 = {
				CONTROLLER = {
					OR = {
						tag = SOV
						is_subject_of = SOV
					}
				}
			}
			230 = {
				CONTROLLER = {
					OR = {
						tag = SOV
						is_subject_of = SOV
					}
				}
			}
			has_equipment = {
				infantry_equipment > 5000
			}
		}
		visible = {
			has_completed_focus = ENG_soviet_lend_lease
		}
		
		days_remove = 30
		cost = 0
		complete_effect = {
		}
		
		days_re_enable = 60
		
		remove_effect = {
			send_equipment = {
				equipment = infantry_equipment
				amount = 5000
				target = SOV
			}
		}
	}
	
	ENG_lease_squad = {
		icon = generic_prepare_civil_war
		allowed = {
			original_tag = ENG
		}
		available = {
			656 = {
				CONTROLLER = {
					OR = {
						tag = ENG
						is_subject_of = ENG
					}
				}
			}
			291 = {
				CONTROLLER = {
					OR = {
						tag = ENG
						is_subject_of = ENG
					}
				}
			}
			413 = {
				CONTROLLER = {
					OR = {
						tag = ENG
						is_subject_of = ENG
					}
				}
			}
			412 = {
				CONTROLLER = {
					OR = {
						tag = ENG
						is_subject_of = ENG
					}
				}
			}
			420 = {
				CONTROLLER = {
					OR = {
						tag = SOV
						is_subject_of = SOV
					}
				}
			}
			419 = {
				CONTROLLER = {
					OR = {
						tag = SOV
						is_subject_of = SOV
					}
				}
			}
			229 = {
				CONTROLLER = {
					OR = {
						tag = SOV
						is_subject_of = SOV
					}
				}
			}
			230 = {
				CONTROLLER = {
					OR = {
						tag = SOV
						is_subject_of = SOV
					}
				}
			}
			has_equipment = {
				squad_equipment > 500
			}
		}
		visible = {
			has_completed_focus = ENG_soviet_lend_lease
		}
		
		days_remove = 30
		cost = 0
		complete_effect = {
		}
		
		days_re_enable = 60
		
		remove_effect = {
			send_equipment = {
				equipment = squad_equipment
				amount = 500
				target = SOV
			}
		}
	}
	
	ENG_lease_radios = {
		icon = generic_prepare_civil_war
		allowed = {
			original_tag = ENG
		}
		available = {
			656 = {
				CONTROLLER = {
					OR = {
						tag = ENG
						is_subject_of = ENG
					}
				}
			}
			291 = {
				CONTROLLER = {
					OR = {
						tag = ENG
						is_subject_of = ENG
					}
				}
			}
			413 = {
				CONTROLLER = {
					OR = {
						tag = ENG
						is_subject_of = ENG
					}
				}
			}
			412 = {
				CONTROLLER = {
					OR = {
						tag = ENG
						is_subject_of = ENG
					}
				}
			}
			420 = {
				CONTROLLER = {
					OR = {
						tag = SOV
						is_subject_of = SOV
					}
				}
			}
			419 = {
				CONTROLLER = {
					OR = {
						tag = SOV
						is_subject_of = SOV
					}
				}
			}
			229 = {
				CONTROLLER = {
					OR = {
						tag = SOV
						is_subject_of = SOV
					}
				}
			}
			230 = {
				CONTROLLER = {
					OR = {
						tag = SOV
						is_subject_of = SOV
					}
				}
			}
			has_equipment = {
				radio_equipment > 500
			}
		}
		visible = {
			has_completed_focus = ENG_soviet_lend_lease
		}
		
		days_remove = 30
		cost = 0
		complete_effect = {
		}
		
		days_re_enable = 60
		
		remove_effect = {
			send_equipment = {
				equipment = radio_equipment
				amount = 500
				target = SOV
			}
		}
	}
	
	ENG_lease_support = {
		icon = generic_prepare_civil_war
		allowed = {
			original_tag = ENG
		}
		available = {
			656 = {
				CONTROLLER = {
					OR = {
						tag = ENG
						is_subject_of = ENG
					}
				}
			}
			291 = {
				CONTROLLER = {
					OR = {
						tag = ENG
						is_subject_of = ENG
					}
				}
			}
			413 = {
				CONTROLLER = {
					OR = {
						tag = ENG
						is_subject_of = ENG
					}
				}
			}
			412 = {
				CONTROLLER = {
					OR = {
						tag = ENG
						is_subject_of = ENG
					}
				}
			}
			420 = {
				CONTROLLER = {
					OR = {
						tag = SOV
						is_subject_of = SOV
					}
				}
			}
			419 = {
				CONTROLLER = {
					OR = {
						tag = SOV
						is_subject_of = SOV
					}
				}
			}
			229 = {
				CONTROLLER = {
					OR = {
						tag = SOV
						is_subject_of = SOV
					}
				}
			}
			230 = {
				CONTROLLER = {
					OR = {
						tag = SOV
						is_subject_of = SOV
					}
				}
			}
			has_equipment = {
				support_equipment > 500
			}
		}
		visible = {
			has_completed_focus = ENG_soviet_lend_lease
		}
		
		days_remove = 30
		cost = 0
		complete_effect = {
		}
		
		days_re_enable = 60
		
		remove_effect = {
			send_equipment = {
				equipment = support_equipment
				amount = 500
				target = SOV
			}
		}
	}
	
	ENG_lease_trucks = {
		icon = generic_prepare_civil_war
		allowed = {
			original_tag = ENG
		}
		available = {
			656 = {
				CONTROLLER = {
					OR = {
						tag = ENG
						is_subject_of = ENG
					}
				}
			}
			291 = {
				CONTROLLER = {
					OR = {
						tag = ENG
						is_subject_of = ENG
					}
				}
			}
			413 = {
				CONTROLLER = {
					OR = {
						tag = ENG
						is_subject_of = ENG
					}
				}
			}
			412 = {
				CONTROLLER = {
					OR = {
						tag = ENG
						is_subject_of = ENG
					}
				}
			}
			420 = {
				CONTROLLER = {
					OR = {
						tag = SOV
						is_subject_of = SOV
					}
				}
			}
			419 = {
				CONTROLLER = {
					OR = {
						tag = SOV
						is_subject_of = SOV
					}
				}
			}
			229 = {
				CONTROLLER = {
					OR = {
						tag = SOV
						is_subject_of = SOV
					}
				}
			}
			230 = {
				CONTROLLER = {
					OR = {
						tag = SOV
						is_subject_of = SOV
					}
				}
			}
			has_equipment = {
				motorized_equipment > 1000
			}
		}
		visible = {
			has_completed_focus = ENG_soviet_lend_lease
		}
		
		days_remove = 30
		cost = 0
		complete_effect = {
		}
		
		days_re_enable = 60
		
		remove_effect = {
			send_equipment = {
				equipment = motorized_equipment
				amount = 1000
				target = SOV
			}
		}
	}
	
	ENG_lease_planes = {
		icon = generic_prepare_civil_war
		allowed = {
			original_tag = ENG
		}
		available = {
			656 = {
				CONTROLLER = {
					OR = {
						tag = ENG
						is_subject_of = ENG
					}
				}
			}
			291 = {
				CONTROLLER = {
					OR = {
						tag = ENG
						is_subject_of = ENG
					}
				}
			}
			413 = {
				CONTROLLER = {
					OR = {
						tag = ENG
						is_subject_of = ENG
					}
				}
			}
			412 = {
				CONTROLLER = {
					OR = {
						tag = ENG
						is_subject_of = ENG
					}
				}
			}
			420 = {
				CONTROLLER = {
					OR = {
						tag = SOV
						is_subject_of = SOV
					}
				}
			}
			419 = {
				CONTROLLER = {
					OR = {
						tag = SOV
						is_subject_of = SOV
					}
				}
			}
			229 = {
				CONTROLLER = {
					OR = {
						tag = SOV
						is_subject_of = SOV
					}
				}
			}
			230 = {
				CONTROLLER = {
					OR = {
						tag = SOV
						is_subject_of = SOV
					}
				}
			}
			has_equipment = {
				fighter_equipment > 500
			}
		}
		visible = {
			has_completed_focus = ENG_soviet_lend_lease
		}
		
		days_remove = 30
		cost = 0
		complete_effect = {
		}
		
		days_re_enable = 60
		
		remove_effect = {
			send_equipment = {
				equipment = fighter_equipment
				amount = 500
				target = SOV
			}
		}
	}
}

ENG_special_research = {
	ENG_prox_fuse = {
	
		icon = generic_construction

		available = {
			NOT = { has_country_flag = ENG_special_research_ongoing }
			has_tech = improved_computing_machine
		}

		cost = 50
		fire_only_once = yes

		ai_will_do = {
			factor = 0
		}
		visible = {
			has_completed_focus = ENG_special_research_department
		}
		days_remove = 180
		modifier = {
			civilian_factory_use = 5
		}
		remove_effect = {
			set_country_flag = ENG_prox_fuse_done
		}
		complete_effect = {
			set_country_flag = { flag = ENG_researching_flag value = 1 days = 180 }
		}
	}
	
	ENG_tube_alloys = {
	
		icon = generic_construction

		available = {
			NOT = { has_country_flag = ENG_special_research_ongoing }
			has_tech = computing_machine
			NOT = { has_tech = atomic_research}
		}

		cost = 50
		fire_only_once = yes

		ai_will_do = {
			factor = 0
		}
		visible = {
			has_completed_focus = ENG_special_research_department
		}
		days_remove = 365
		modifier = {
			civilian_factory_use = 10
		}
		remove_effect = {
			set_technology = { atomic_research = 1 }
		}
		complete_effect = {
			set_country_flag = { flag = ENG_researching_flag value = 1 days = 365 }
		}
	}
	
	ENG_tallboys = {
	
		icon = generic_construction

		available = {
			NOT = { has_country_flag = ENG_special_research_ongoing }
			has_tech = strategic_bomber3
		}

		cost = 50
		fire_only_once = yes

		ai_will_do = {
			factor = 0
		}
		visible = {
			has_completed_focus = ENG_special_research_department
		}
		days_remove = 180
		modifier = {
			civilian_factory_use = 5
		}
		remove_effect = {
			add_ideas = ENG_tallboys_idea
		}
		complete_effect = {
			set_country_flag = { flag = ENG_researching_flag value = 1 days = 180 }
		}
	}
	
	ENG_bouncing_bombs = {
	
		icon = generic_construction

		available = {
			NOT = { has_country_flag = ENG_special_research_ongoing }
			has_tech = strategic_bomber2
		}

		cost = 50
		fire_only_once = yes

		ai_will_do = {
			factor = 0
		}
		visible = {
			has_completed_focus = ENG_special_research_department
			always = no
		}
		days_remove = 180
		modifier = {
			civilian_factory_use = 5
		}
		remove_effect = {
			
		}
		complete_effect = {
			set_country_flag = { flag = ENG_researching_flag value = 1 days = 180 }
		}
	}
}

ENG_propaganda_campaigns = {
	ENG_together_prop = { # ID = 2
		priority = 12

		icon = eng_propaganda_campaigns

		allowed = {
			original_tag = ENG
		}

		available = {
			ENG_propaganda_poster_slot_available = yes
			has_completed_focus = ENG_develop_the_empire
		}

		days_remove = 365

		days_re_enable = 360

		cost = 25

		modifier = {
			research_sharing_per_country_bonus_factor = 0.5
			command_power_gain_mult = 0.25
			subjects_autonomy_gain = 0.5
		}

		complete_effect = {
			set_variable = { ENG_new_propaganda_campaign = 2 }
			ENG_pick_propaganda_campaign_slot_effect = yes
		}

		remove_effect = {
			set_variable = { ENG_propaganda_campaign_to_remove = 2 }
			ENG_reset_propaganda_campaign_slot_effect = yes
			hidden_effect = { FROM = { country_event = { id = generic.26 hours = 1} } }
		}
	}

	ENG_women_prop = { # ID = 3
		priority = 11

		icon = eng_propaganda_campaigns

		allowed = {
			original_tag = ENG
		}

		available = {
			ENG_propaganda_poster_slot_available = yes
		}

		days_remove = 365

		days_re_enable = 360

		cost = 25

		modifier = {
			production_factory_start_efficiency_factor = 0.1
			line_change_production_efficiency_factor = 0.05
		}

		complete_effect = {
			set_variable = { ENG_new_propaganda_campaign = 3 }
			ENG_pick_propaganda_campaign_slot_effect = yes
		}

		remove_effect = {
			set_variable = { ENG_propaganda_campaign_to_remove = 3 }
			ENG_reset_propaganda_campaign_slot_effect = yes
			hidden_effect = { FROM = { country_event = { id = generic.26 hours = 1} } }
		}
	}

	ENG_finest_hour_prop = { # ID = 4
		priority = 10

		icon = eng_propaganda_campaigns

		allowed = {
			original_tag = ENG
		}

		available = {
			ENG_propaganda_poster_slot_available = yes
			has_country_flag = this_was_their_finest_hour_speech
		}

		days_remove = 365

		days_re_enable = 360

		cost = 25

		modifier = {
			air_home_defence_factor = 0.25
			army_core_attack_factor = 0.2
			army_core_defence_factor = 0.2
			minimum_training_level = -0.2
		}

		complete_effect = {
			set_variable = { ENG_new_propaganda_campaign = 4 }
			ENG_pick_propaganda_campaign_slot_effect = yes
		}

		remove_effect = {
			set_variable = { ENG_propaganda_campaign_to_remove = 4 }
			ENG_reset_propaganda_campaign_slot_effect = yes
			hidden_effect = { FROM = { country_event = { id = generic.26 hours = 1} } }
		}
	}

	ENG_careless_talk_prop = { # ID = 5
		priority = 9

		icon = eng_propaganda_campaigns

		allowed = {
			original_tag = ENG
		}

		available = {
			ENG_propaganda_poster_slot_available = yes
		}

		days_remove = 365

		days_re_enable = 360

		cost = 25

		modifier = {
			civilian_intel_to_others = -15
			airforce_intel_to_others = -15
			navy_intel_to_others = -15
			#army_intel_to_others = -15 Can't have this because too low intel makes units invis
			intel_from_combat_factor = 0.15
		}

		complete_effect = {
			set_variable = { ENG_new_propaganda_campaign = 5 }
			ENG_pick_propaganda_campaign_slot_effect = yes
		}

		remove_effect = {
			set_variable = { ENG_propaganda_campaign_to_remove = 5 }
			ENG_reset_propaganda_campaign_slot_effect = yes
			hidden_effect = { FROM = { country_event = { id = generic.26 hours = 1} } }
		}
	}

	ENG_wings_victory_prop = { # ID = 6
		priority = 8

		icon = eng_propaganda_campaigns

		allowed = {
			original_tag = ENG
		}

		available = {
			ENG_propaganda_poster_slot_available = yes
			has_completed_focus = ENG_raf
			has_war = yes
		}

		days_remove = 365

		days_re_enable = 360

		cost = 25

		modifier = {
			air_intercept_efficiency = 0.05
			air_mission_efficiency = 0.1
		}

		complete_effect = {
			set_variable = { ENG_new_propaganda_campaign = 6 }
			ENG_pick_propaganda_campaign_slot_effect = yes
		}

		remove_effect = {
			set_variable = { ENG_propaganda_campaign_to_remove = 6 }
			ENG_reset_propaganda_campaign_slot_effect = yes
			hidden_effect = { FROM = { country_event = { id = generic.26 hours = 1} } }
		}
	}

	ENG_dig_victory_prop = { # ID = 7
		priority = 7

		icon = eng_propaganda_campaigns

		allowed = {
			original_tag = ENG
		}

		available = {
			ENG_propaganda_poster_slot_available = yes
			has_completed_focus = ENG_war_cabinet
		}

		days_remove = 365

		days_re_enable = 360

		cost = 25

		modifier = {
			local_resources_factor = 0.1
			min_export = -0.1
		}

		complete_effect = {
			set_variable = { ENG_new_propaganda_campaign = 7 }
			ENG_pick_propaganda_campaign_slot_effect = yes
		}

		remove_effect = {
			set_variable = { ENG_propaganda_campaign_to_remove = 7 }
			ENG_reset_propaganda_campaign_slot_effect = yes
			hidden_effect = { FROM = { country_event = { id = generic.26 hours = 1} } }
		}
	}

	ENG_japan_prop = { # ID = 8
		priority = 6

		icon = eng_propaganda_campaigns

		allowed = {
			original_tag = ENG
		}

		available = {
			ENG_propaganda_poster_slot_available = yes
			has_war_with = JAP
			has_war_with = GER
		}

		days_remove = 365

		days_re_enable = 360

		cost = 25

		targeted_modifier = {
			tag = JAP
			attack_bonus_against = 0.1
		}
		targeted_modifier = {
			tag = GER
			attack_bonus_against = -0.1
		}


		complete_effect = {
			set_variable = { ENG_new_propaganda_campaign = 8 }
			ENG_pick_propaganda_campaign_slot_effect = yes
		}

		remove_effect = {
			set_variable = { ENG_propaganda_campaign_to_remove = 8 }
			ENG_reset_propaganda_campaign_slot_effect = yes
			hidden_effect = { FROM = { country_event = { id = generic.26 hours = 1} } }
		}
	}
	
	ENG_oil_prop = { # ID = 9
		priority = 5

		icon = eng_propaganda_campaigns

		allowed = {
			original_tag = ENG
		}

		available = {
			ENG_propaganda_poster_slot_available = yes
			has_completed_focus = ENG_inchindown_fuel
		}

		days_remove = 365

		days_re_enable = 360

		cost = 25

		modifier = {
			fuel_gain_factor = 0.20
			air_fuel_consumption_factor = -0.10
			army_fuel_consumption_factor = -0.10
			navy_fuel_consumption_factor = -0.10
		}

		complete_effect = {
			set_variable = { ENG_new_propaganda_campaign = 9 }
			ENG_pick_propaganda_campaign_slot_effect = yes
		}

		remove_effect = {
			set_variable = { ENG_propaganda_campaign_to_remove = 9 }
			ENG_reset_propaganda_campaign_slot_effect = yes
			hidden_effect = { FROM = { country_event = { id = generic.26 hours = 1} } }
		}
	}
	
	ENG_air_production_prop = { # ID = 10
		priority = 4

		icon = eng_propaganda_campaigns

		allowed = {
			original_tag = ENG
		}

		available = {
			ENG_propaganda_poster_slot_available = yes
			has_completed_focus = ENG_air_production_group
		}

		days_remove = 365

		days_re_enable = 360

		cost = 25

		complete_effect = {
			set_variable = { ENG_new_propaganda_campaign = 10 }
			ENG_pick_propaganda_campaign_slot_effect = yes
			add_ideas = ENG_air_prod
		}

		remove_effect = {
			set_variable = { ENG_propaganda_campaign_to_remove = 10 }
			ENG_reset_propaganda_campaign_slot_effect = yes
			hidden_effect = { FROM = { country_event = { id = generic.26 hours = 1} } }
			remove_ideas = ENG_air_prod
		}
	}
	
	ENG_blood_prop = { # ID = 11
		priority = 3

		icon = eng_propaganda_campaigns

		allowed = {
			original_tag = ENG
		}

		available = {
			ENG_propaganda_poster_slot_available = yes
			has_war = yes
		}

		days_remove = 365

		days_re_enable = 360

		cost = 25

		modifier = {
			experience_loss_factor = -0.10
			army_morale_factor = 0.05
		}

		complete_effect = {
			set_variable = { ENG_new_propaganda_campaign = 11 }
			ENG_pick_propaganda_campaign_slot_effect = yes
		}

		remove_effect = {
			set_variable = { ENG_propaganda_campaign_to_remove = 11 }
			ENG_reset_propaganda_campaign_slot_effect = yes
			hidden_effect = { FROM = { country_event = { id = generic.26 hours = 1} } }
		}
	}
	
	ENG_german_prop = { # ID = 12
		priority = 2

		icon = eng_propaganda_campaigns

		allowed = {
			original_tag = ENG
		}

		available = {
			ENG_propaganda_poster_slot_available = yes
			has_war_with = GER
			OR = {
				has_war_with = JAP
				JAP = { has_capitulated = yes }
			}
		}

		days_remove = 365

		days_re_enable = 360

		cost = 25

		targeted_modifier = {
			tag = GER
			attack_bonus_against = 0.1
		}
		targeted_modifier = {
			tag = JAP
			attack_bonus_against = -0.1
		}

		complete_effect = {
			set_variable = { ENG_new_propaganda_campaign = 12 }
			ENG_pick_propaganda_campaign_slot_effect = yes
		}

		remove_effect = {
			set_variable = { ENG_propaganda_campaign_to_remove = 12 }
			ENG_reset_propaganda_campaign_slot_effect = yes
			hidden_effect = { FROM = { country_event = { id = generic.26 hours = 1} } }
		}
	}
	
	ENG_war_savings_prop = { # ID = 13
		priority = 1

		icon = eng_propaganda_campaigns

		allowed = {
			original_tag = ENG
		}

		available = {
			ENG_propaganda_poster_slot_available = yes
			date > 1942.1.1
		}

		days_remove = 365

		days_re_enable = 360

		cost = 25

		modifier = {
			consumer_goods_factor = -0.06
		}

		complete_effect = {
			set_variable = { ENG_new_propaganda_campaign = 13 }
			ENG_pick_propaganda_campaign_slot_effect = yes
		}

		remove_effect = {
			set_variable = { ENG_propaganda_campaign_to_remove = 13 }
			ENG_reset_propaganda_campaign_slot_effect = yes
			hidden_effect = { FROM = { country_event = { id = generic.26 hours = 1} } }
		}
	}
}
